{"version":3,"sources":["webpack://react-keyed-file-browser/webpack/universalModuleDefinition","webpack://react-keyed-file-browser/webpack/bootstrap","webpack://react-keyed-file-browser/external \"react\"","webpack://react-keyed-file-browser/external \"prop-types\"","webpack://react-keyed-file-browser/external \"date-fns\"","webpack://react-keyed-file-browser/external \"react-dnd\"","webpack://react-keyed-file-browser/external \"react-dnd-html5-backend\"","webpack://react-keyed-file-browser/external \"classnames\"","webpack://react-keyed-file-browser/external \"lodash\"","webpack://react-keyed-file-browser/./src/details/default.js","webpack://react-keyed-file-browser/./src/filters/default.js","webpack://react-keyed-file-browser/./src/utils.js","webpack://react-keyed-file-browser/./src/constants.js","webpack://react-keyed-file-browser/./src/base-file.js","webpack://react-keyed-file-browser/./src/headers/table.js","webpack://react-keyed-file-browser/./src/files/utils.js","webpack://react-keyed-file-browser/./src/files/list-thumbnail.js","webpack://react-keyed-file-browser/./src/files/simple-list-thumbnail.js","webpack://react-keyed-file-browser/./src/files/table.js","webpack://react-keyed-file-browser/./src/base-folder.js","webpack://react-keyed-file-browser/./src/folders/list-thumbnail.js","webpack://react-keyed-file-browser/./src/folders/table.js","webpack://react-keyed-file-browser/./src/confirmations/default.js","webpack://react-keyed-file-browser/./src/confirmations/multiple.js","webpack://react-keyed-file-browser/./src/groupers/by-folder.js","webpack://react-keyed-file-browser/./src/groupers/by-modified.js","webpack://react-keyed-file-browser/./src/groupers/utils.js","webpack://react-keyed-file-browser/./src/sorters/utils.js","webpack://react-keyed-file-browser/./src/sorters/by-name.js","webpack://react-keyed-file-browser/./src/sorters/by-modified.js","webpack://react-keyed-file-browser/./src/actions/default.js","webpack://react-keyed-file-browser/./src/browser.js","webpack://react-keyed-file-browser/./src/icons/FontAwesome.js","webpack://react-keyed-file-browser/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","Detail","handleCloseClick","event","preventDefault","props","close","this","file","split","length","href","onClick","React","Component","propTypes","PropTypes","shape","string","isRequired","extension","url","func","Filter","handleFilterChange","newValue","filterRef","updateFilter","id","ref","el","type","placeholder","onChange","htmlFor","icons","Search","isFolder","endsWith","moveFilesAndFolders","monitor","component","didDrop","dropResult","getDropResult","folders","files","browserProps","selection","forEach","push","openFolder","path","fileKey","fileNameParts","folderName","newKey","substr","moveFolder","fileName","moveFile","extensionMapping","entries","Archive","Audio","Excel","Image","PDF","PowerPoint","Text","Video","Word","Code","BaseFile","state","newName","getName","handleFileClick","preview","getExtension","handleItemClick","stopPropagation","select","ctrlKey","metaKey","shiftKey","handleItemDoubleClick","handleRenameClick","renameFile","beginAction","handleNewNameChange","newNameRef","setState","handleRenameSubmit","trim","some","char","indexOf","slashIndex","lastIndexOf","handleDeleteClick","deleteFile","handleDeleteSubmit","actionTargets","handleCancelEdit","endAction","oldProps","oldState","isRenaming","requestAnimationFrame","currentName","pointIndex","setSelectionRange","focus","blobs","toLowerCase","render","inAction","isDragging","action","connectDragSource","createFiles","connectDropTarget","bool","BaseFileConnectors","dragSource","beginDrag","includes","endDrag","dragCollect","connect","connectDragPreview","dragPreview","targetSource","drop","item","getItem","targetCollect","dropTarget","isOver","shallow","RawTableHeader","header","className","ClassNames","dragover","selected","isSelected","isShouldShowShared","isShouldShowSharedWithWhom","TableHeader","DropTarget","NativeTypes","FILE","fileSize","size","kbSize","floatValue","precision","parseFloat","isNaN","toFixed","power","Math","pow","round","toString","floatPrecision","RawListThumbnailFile","icon","thumbnailUrl","thumbnail_url","isSelectable","isDeleting","showName","showSize","showModified","style","backgroundImage","getFileType","File","modified","ConfirmDeletionRenderer","confirmDeletionRenderer","onSubmit","onBlur","autoFocus","download","formatDistanceToNow","addSuffix","rowProps","row","pending","dragging","onDoubleClick","status","Lock","connectDND","defaultProps","ListThumbnailFile","DragSource","SimpleListThumbnailFile","RawTableFile","depth","sharer","shared_with","draggable","Checked","Unchecked","paddingLeft","TableFile","BaseFolder","isDraft","selectAllNewName","handleFolderClick","handleFolderDoubleClick","toggleFolder","renameFolder","createFolder","deleteFolder","keyDerived","BaseFolderConnectors","RawListThumbnailFolder","children","isOpen","nestChildren","childIndex","thisItemProps","getItemProps","folderRenderer","folderRendererProps","fileRenderer","fileRendererProps","padding","folder","expanded","ListThumbnailFolder","RawTableFolder","TableFolder","ConfirmDeletion","node","MultipleConfirmDeletion","fileTree","contents","map","relativeKey","currentFolder","folderIndex","addAllChildren","level","prefix","undefined","concat","windows","now","timeWindows","Date","begins","startOfToday","ends","endOfToday","items","startOfYesterday","endOfYesterday","startOfWeek","endOfWeek","addWeeks","getMonth","startOfMonth","endOfMonth","fileIndex","newFile","allocated","fileModified","windex","timeWindow","newWindow","format","grouped","replace","NUMBER_GROUPS","naturalSortComparer","a","b","aa","String","bb","min","x","y","naturalDraftComparer","draft","naturalSort","allFiles","keyFolders","sort","sortedFiles","lastModifiedSort","compareAsc","Actions","selectedItems","nameFilter","canCreateFolder","onCreateFolder","canRenameFile","onRenameFile","canRenameFolder","onRenameFolder","canDeleteFile","onDeleteFile","canDeleteFolder","onDeleteFolder","canDownloadFile","onDownloadFile","actions","selectedItemsAction","filter","Set","actionText","Loading","FolderPlus","role","itemsWithoutKeyDerived","find","Rename","Delete","Download","arrayOf","regexForNewFolderOrFileSelection","openFolders","activeAction","RawFileBrowser","searchResultsShown","previewFile","addFolder","getFile","f","fileObj","keys","prevState","stateChanges","onCreateFiles","oldKey","onMoveFile","onMoveFolder","downloadFile","ids","match","onSelectionChange","selectedType","shouldClearState","newSelection","indexOfKey","slice","onSelect","onSelectFile","onSelectFolder","closeDetail","onPreviewOpen","onPreviewClose","handleShowMoreClick","folderKey","callback","onFolderOpen","handleGlobalClick","inBrowser","browserRef","contains","target","inPreview","previewRef","handleActionBarRenameClick","console","log","handleActionBarDeleteClick","handleActionBarAddFolderClick","addKey","handleActionBarDownloadClick","handleMultipleDeleteSubmit","renderStyle","warn","addEventListener","removeEventListener","confirmMultipleDeletionRenderer","canFilter","filterRendererProps","FilterRenderer","filterRenderer","ActionRenderer","actionRenderer","getBrowserProps","selectionIsFolder","actionBarRef","FileRenderer","FolderRenderer","renderedFiles","showFoldersOnFilter","renderFiles","headerProps","fileCount","filteredFiles","terms","skip","term","group","newFiles","findSelected","colSpan","noFilesMessage","headerRenderer","headerRendererProps","cellSpacing","cellPadding","more","ConfirmMultipleDeletionRenderer","showActionBar","renderActionBar","detailRenderer","detailRendererProps","file_id","oneOfType","number","oneOf","created","Folder","element","FolderOpen","startOpen","onFolderClose","GroupByFolder","SortByName","DefaultFilter","DefaultDetail","DefaultAction","fileOrFolder","isShouldInvokeCreateFolder","isShouldFireRename","FileBrowser","DragDropContext","HTML5Backend","IsFontAwesomeLoaded","version","fontNames","FontAwesomeLoaded","span","document","createElement","display","body","insertBefore","firstChild","getComputedStyle","getPropertyValue","removeChild","FontAwesomeIcons","majorVersion","aria-hidden","FolderFilled","FolderOpenFilled"],"mappings":"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","file":"react-keyed-file-browser.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-keyed-file-browser\"] = factory();\n\telse\n\t\troot[\"react-keyed-file-browser\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = require(\"react\");","module.exports = require(\"prop-types\");","module.exports = require(\"date-fns\");","module.exports = require(\"react-dnd\");","module.exports = require(\"react-dnd-html5-backend\");","module.exports = require(\"classnames\");","module.exports = require(\"lodash\");","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\n\r\nclass Detail extends React.Component {\r\n  static propTypes = {\r\n    file: PropTypes.shape({\r\n      key: PropTypes.string.isRequired,\r\n      name: PropTypes.string.isRequired,\r\n      extension: PropTypes.string.isRequired,\r\n      url: PropTypes.string,\r\n    }).isRequired,\r\n    close: PropTypes.func,\r\n  }\r\n\r\n  handleCloseClick = (event) => {\r\n    if (event) {\r\n      event.preventDefault()\r\n    }\r\n    this.props.close()\r\n  }\r\n\r\n  render() {\r\n    let name = this.props.file.key.split('/')\r\n    name = name.length ? name[name.length - 1] : ''\r\n\r\n    return (\r\n      <div>\r\n        <h2>Item Detail</h2>\r\n        <dl>\r\n          <dt>Key</dt>\r\n          <dd>{this.props.file.key}</dd>\r\n\r\n          <dt>Name</dt>\r\n          <dd>{name}</dd>\r\n        </dl>\r\n        <a href=\"#\" onClick={this.handleCloseClick}>Close</a>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Detail\r\n","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\n\r\nclass Filter extends React.Component {\r\n  static propTypes = {\r\n    value: PropTypes.string.isRequired,\r\n    icons: PropTypes.object,\r\n    updateFilter: PropTypes.func,\r\n  };\r\n\r\n  handleFilterChange = (event) => {\r\n    const newValue = this.filterRef.value;\r\n    this.props.updateFilter(newValue);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <section>\r\n        <input\r\n          id=\"filter-input\"\r\n          ref={(el) => {\r\n            this.filterRef = el;\r\n          }}\r\n          type=\"search\"\r\n          placeholder=\"Filter files\"\r\n          value={this.props.value}\r\n          onChange={this.handleFilterChange}\r\n        />\r\n        {this.props.value === \"\" ? (\r\n          <label htmlFor=\"filter-input\">{this.props.icons.Search}</label>\r\n        ) : null}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Filter;\r\n","function isFolder(file) {\r\n  return file.key.endsWith('/')\r\n}\r\n\r\nfunction moveFilesAndFolders(props, monitor, component) {\r\n  if (!monitor.didDrop()) {\r\n    return\r\n  }\r\n\r\n  const dropResult = monitor.getDropResult()\r\n\r\n  const folders = []\r\n  const files = []\r\n\r\n  props.browserProps.selection.forEach(selection => {\r\n    selection[selection.length - 1] === '/' ? folders.push(selection) : files.push(selection)\r\n  })\r\n\r\n  props.browserProps.openFolder(dropResult.path)\r\n\r\n  folders\r\n    .forEach(selection => {\r\n      const fileKey = selection\r\n      const fileNameParts = fileKey.split('/')\r\n      const folderName = fileNameParts[fileNameParts.length - 2]\r\n\r\n      const newKey = `${dropResult.path}${folderName}/`\r\n      // abort if the new folder name contains itself\r\n      if (newKey.substr(0, fileKey.length) === fileKey) return\r\n\r\n      if (newKey !== fileKey && props.browserProps.moveFolder) {\r\n        props.browserProps.moveFolder(fileKey, newKey)\r\n      }\r\n    })\r\n\r\n  files\r\n    .forEach(selection => {\r\n      const fileKey = selection\r\n      const fileNameParts = fileKey.split('/')\r\n      const fileName = fileNameParts[fileNameParts.length - 1]\r\n      const newKey = `${dropResult.path}${fileName}`\r\n      if (newKey !== fileKey && props.browserProps.moveFile) {\r\n        props.browserProps.moveFile(fileKey, newKey)\r\n      }\r\n    })\r\n}\r\n\r\nexport { isFolder, moveFilesAndFolders }\r\n","const FILETYPE_EXTENSIONS = {\r\n  Archive: [\r\n    'zip',\r\n    'rar',\r\n    '7z',\r\n  ],\r\n  Audio: [\r\n    'mp3',\r\n    'ogg',\r\n    'wav',\r\n    'aac',\r\n  ],\r\n  Excel: [\r\n    'xls',\r\n    'xlsx',\r\n  ],\r\n  Image: [\r\n    'jpg',\r\n    'jpeg',\r\n    'png',\r\n    'bmp',\r\n  ],\r\n  PDF: [\r\n    'pdf',\r\n  ],\r\n  PowerPoint: [\r\n    'ppt',\r\n    'pptx',\r\n  ],\r\n  Text: [\r\n    'txt',\r\n  ],\r\n  Video: [\r\n    'mp4',\r\n    'flv',\r\n    'avi',\r\n    'wmv',\r\n    'mov',\r\n  ],\r\n  Word: [\r\n    'doc',\r\n    'docx',\r\n  ],\r\n  Code: [\r\n    'js',\r\n  ],\r\n}\r\n\r\nconst extensionMapping = {}\r\n\r\nfor (const [type, extensions] of Object.entries(FILETYPE_EXTENSIONS)) {\r\n  for (const extension of extensions) {\r\n    extensionMapping[extension] = type\r\n  }\r\n}\r\n\r\nexport { extensionMapping }\r\n","// @ts-nocheck\r\nimport PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport { moveFilesAndFolders } from \"./utils\";\r\nimport { extensionMapping } from \"./constants.js\";\r\n\r\nclass BaseFile extends React.Component {\r\n  static propTypes = {\r\n    fileKey: PropTypes.string,\r\n    url: PropTypes.string,\r\n\r\n    newKey: PropTypes.string,\r\n    isRenaming: PropTypes.bool,\r\n\r\n    connectDragSource: PropTypes.func,\r\n    connectDropTarget: PropTypes.func,\r\n    isDragging: PropTypes.bool,\r\n    action: PropTypes.string,\r\n\r\n    browserProps: PropTypes.shape({\r\n      icons: PropTypes.object,\r\n      select: PropTypes.func,\r\n      beginAction: PropTypes.func,\r\n      endAction: PropTypes.func,\r\n      preview: PropTypes.func,\r\n\r\n      createFiles: PropTypes.func,\r\n      moveFile: PropTypes.func,\r\n      moveFolder: PropTypes.func,\r\n      renameFile: PropTypes.func,\r\n      deleteFile: PropTypes.func,\r\n    }),\r\n  };\r\n\r\n  state = {\r\n    newName: this.getName(),\r\n  }\r\n\r\n  componentDidUpdate(oldProps, oldState) {\r\n    if (!oldProps.isRenaming && this.props.isRenaming) {\r\n      window.requestAnimationFrame(() => {\r\n        const currentName = this.newNameRef.value\r\n        const pointIndex = currentName.lastIndexOf('.')\r\n        this.newNameRef.setSelectionRange(0, pointIndex || currentName.length)\r\n        this.newNameRef.focus()\r\n      })\r\n    }\r\n  }\r\n\r\n  getName() {\r\n    let name = this.props.newKey || this.props.fileKey\r\n    const slashIndex = name.lastIndexOf('/')\r\n    if (slashIndex !== -1) {\r\n      name = name.substr(slashIndex + 1);\r\n    }\r\n    return name;\r\n  }\r\n  getExtension() {\r\n    const blobs = this.props.fileKey.split(\".\");\r\n    return blobs[blobs.length - 1].toLowerCase().trim();\r\n  }\r\n\r\n  getFileType() {\r\n    return extensionMapping[this.getExtension()] || \"File\";\r\n  }\r\n\r\n  handleFileClick = (event) => {\r\n    event && event.preventDefault();\r\n    this.props.browserProps.preview({\r\n      url: this.props.url,\r\n      name: this.getName(),\r\n      key: this.props.fileKey,\r\n      extension: this.getExtension(),\r\n    });\r\n  };\r\n  handleItemClick = (event) => {\r\n    event.stopPropagation();\r\n    this.props.browserProps.select(\r\n      this.props.fileKey,\r\n      \"file\",\r\n      event.ctrlKey || event.metaKey,\r\n      event.shiftKey\r\n    );\r\n  };\r\n  handleItemDoubleClick = (event) => {\r\n    event.stopPropagation();\r\n    this.handleFileClick();\r\n  };\r\n\r\n  handleRenameClick = (event) => {\r\n    if (!this.props.browserProps.renameFile) {\r\n      return;\r\n    }\r\n    this.props.browserProps.beginAction(\"rename\", this.props.fileKey);\r\n  };\r\n  handleNewNameChange = (event) => {\r\n    const newName = this.newNameRef.value\r\n    this.setState({ newName: newName })\r\n  }\r\n  handleRenameSubmit = (event) => {\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n    if (!this.props.browserProps.renameFile) {\r\n      return;\r\n    }\r\n    const newName = this.state.newName.trim();\r\n    if (newName.length === 0) {\r\n      // todo: move to props handler\r\n      // window.notify({\r\n      //   style: 'error',\r\n      //   title: 'Invalid new file name',\r\n      //   body: 'File name cannot be blank',\r\n      // })\r\n      return;\r\n    }\r\n    const invalidChar = [\"/\", \"\\\\\"];\r\n    if (invalidChar.some((char) => newName.indexOf(char) !== -1)) return;\r\n    // todo: move to props handler\r\n    // window.notify({\r\n    //   style: 'error',\r\n    //   title: 'Invalid new file name',\r\n    //   body: 'File names cannot contain forward slashes.',\r\n    // })\r\n    let newKey = newName;\r\n    const slashIndex = this.props.fileKey.lastIndexOf(\"/\");\r\n    if (slashIndex !== -1) {\r\n      newKey = `${this.props.fileKey.substr(0, slashIndex)}/${newName}`;\r\n    }\r\n    this.props.browserProps.renameFile(this.props.fileKey, newKey);\r\n  };\r\n\r\n  handleDeleteClick = (event) => {\r\n    if (!this.props.browserProps.deleteFile) {\r\n      return;\r\n    }\r\n    this.props.browserProps.beginAction(\"delete\", this.props.fileKey);\r\n  };\r\n  handleDeleteSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (!this.props.browserProps.deleteFile) {\r\n      return;\r\n    }\r\n\r\n    this.props.browserProps.deleteFile(this.props.browserProps.actionTargets);\r\n  };\r\n\r\n  handleCancelEdit = (event) => {\r\n    this.props.browserProps.endAction();\r\n  };\r\n\r\n  connectDND(render) {\r\n    const inAction = this.props.isDragging || this.props.action;\r\n    if (\r\n      typeof this.props.browserProps.moveFile === \"function\" &&\r\n      !inAction &&\r\n      !this.props.isRenaming\r\n    ) {\r\n      render = this.props.connectDragSource(render);\r\n    }\r\n    if (\r\n      typeof this.props.browserProps.createFiles === \"function\" ||\r\n      typeof this.props.browserProps.moveFile === \"function\" ||\r\n      typeof this.props.browserProps.moveFolder === \"function\"\r\n    ) {\r\n      render = this.props.connectDropTarget(render);\r\n    }\r\n    return render;\r\n  }\r\n}\r\n\r\nconst dragSource = {\r\n  beginDrag(props) {\r\n    if (\r\n      !props.browserProps.selection.length ||\r\n      !props.browserProps.selection.includes(props.fileKey)\r\n    ) {\r\n      props.browserProps.select(props.fileKey, \"file\");\r\n    }\r\n    return {\r\n      key: props.fileKey,\r\n    };\r\n  },\r\n\r\n  endDrag(props, monitor, component) {\r\n    moveFilesAndFolders(props, monitor, component);\r\n  },\r\n};\r\n\r\nfunction dragCollect(connect, monitor) {\r\n  return {\r\n    connectDragPreview: connect.dragPreview(),\r\n    connectDragSource: connect.dragSource(),\r\n    isDragging: monitor.isDragging(),\r\n  };\r\n}\r\n\r\nconst targetSource = {\r\n  drop(props, monitor) {\r\n    if (monitor.didDrop()) {\r\n      return;\r\n    }\r\n    const key = props.newKey || props.fileKey;\r\n    const slashIndex = key.lastIndexOf(\"/\");\r\n    const path = slashIndex !== -1 ? key.substr(0, slashIndex + 1) : \"\";\r\n    const item = monitor.getItem();\r\n    if (item.files && props.browserProps.createFiles) {\r\n      props.browserProps.createFiles(item.files, path);\r\n    }\r\n    return {\r\n      path: path,\r\n    };\r\n  },\r\n};\r\n\r\nfunction targetCollect(connect, monitor) {\r\n  return {\r\n    connectDropTarget: connect.dropTarget(),\r\n    isOver: monitor.isOver({ shallow: true }),\r\n  };\r\n}\r\n\r\nconst BaseFileConnectors = {\r\n  dragSource,\r\n  dragCollect,\r\n  targetSource,\r\n  targetCollect,\r\n};\r\n\r\nexport default BaseFile;\r\nexport { BaseFileConnectors };\r\n","import PropTypes from \"prop-types\";\r\nimport React from \"react\";\r\nimport ClassNames from \"classnames\";\r\n\r\nimport { DropTarget } from \"react-dnd\";\r\nimport { NativeTypes } from \"react-dnd-html5-backend\";\r\n\r\nimport { BaseFileConnectors } from \"./../base-file.js\";\r\n\r\nclass RawTableHeader extends React.Component {\r\n  static propTypes = {\r\n    select: PropTypes.func,\r\n    fileKey: PropTypes.string,\r\n\r\n    connectDropTarget: PropTypes.func,\r\n    isOver: PropTypes.bool,\r\n    isSelected: PropTypes.func,\r\n    isShouldShowShared: PropTypes.bool,\r\n    isShouldShowSharedWithWhom: PropTypes.bool,\r\n\r\n    browserProps: PropTypes.shape({\r\n      createFiles: PropTypes.func,\r\n      moveFolder: PropTypes.func,\r\n      moveFile: PropTypes.func,\r\n    }),\r\n  };\r\n\r\n  handleHeaderClick(event) {\r\n    this.props.select(this.props.fileKey);\r\n  }\r\n\r\n  render() {\r\n    const header = (\r\n      <tr\r\n        className={ClassNames(\"folder\", {\r\n          dragover: this.props.isOver,\r\n          selected: this.props.isSelected,\r\n        })}\r\n      >\r\n        <th>File</th>\r\n        {this.props.isShouldShowShared ? (\r\n          <th className=\"size\">Shared by</th>\r\n        ) : null}\r\n        {this.props.isShouldShowSharedWithWhom ? (\r\n          <th className=\"size\">Shared with</th>\r\n        ) : null}\r\n        <th className=\"size\">Size</th>\r\n        <th className=\"size\">Status</th>\r\n        <th className=\"modified\">Last Modified</th>\r\n      </tr>\r\n    );\r\n\r\n    if (\r\n      typeof this.props.browserProps.createFiles === \"function\" ||\r\n      typeof this.props.browserProps.moveFile === \"function\" ||\r\n      typeof this.props.browserProps.moveFolder === \"function\"\r\n    ) {\r\n      return this.props.connectDropTarget(header);\r\n    } else {\r\n      return header;\r\n    }\r\n  }\r\n}\r\n\r\n@DropTarget(\r\n  [\"file\", \"folder\", NativeTypes.FILE],\r\n  BaseFileConnectors.targetSource,\r\n  BaseFileConnectors.targetCollect\r\n)\r\nclass TableHeader extends RawTableHeader {}\r\n\r\nexport default TableHeader;\r\nexport { RawTableHeader };\r\n","function floatPrecision(floatValue, precision) {\r\n  floatValue = parseFloat(floatValue)\r\n  if (isNaN(floatValue)) { return parseFloat('0').toFixed(precision) } else {\r\n    const power = Math.pow(10, precision)\r\n    floatValue = (Math.round(floatValue * power) / power).toFixed(precision)\r\n    return floatValue.toString()\r\n  }\r\n}\r\n\r\nfunction fileSize(size) {\r\n  if (size > 1024) {\r\n    const kbSize = size / 1024\r\n    if (kbSize > 1024) {\r\n      const mbSize = kbSize / 1024\r\n      return `${floatPrecision(mbSize, 2)} MB`\r\n    }\r\n    return `${Math.round(kbSize)} kB`\r\n  }\r\n  return `${size} B`\r\n}\r\n\r\nexport { floatPrecision, fileSize }\r\n","import React from \"react\";\r\nimport ClassNames from \"classnames\";\r\nimport { DragSource, DropTarget } from \"react-dnd\";\r\nimport { NativeTypes } from \"react-dnd-html5-backend\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\nimport BaseFile, { BaseFileConnectors } from \"./../base-file.js\";\r\nimport { fileSize } from \"./utils.js\";\r\n\r\nclass RawListThumbnailFile extends BaseFile {\r\n  static defaultProps = {\r\n    showName: true,\r\n    showSize: true,\r\n    showModified: true,\r\n    isSelectable: true,\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      thumbnail_url: thumbnailUrl,\r\n      action,\r\n      url,\r\n      isDragging,\r\n      isRenaming,\r\n      isSelected,\r\n      isSelectable,\r\n      isOver,\r\n      isDeleting,\r\n      showName,\r\n      showSize,\r\n      showModified,\r\n      browserProps,\r\n      connectDragPreview,\r\n    } = this.props;\r\n\r\n    let icon;\r\n    if (thumbnailUrl) {\r\n      icon = (\r\n        <div\r\n          className=\"image\"\r\n          style={{\r\n            backgroundImage: \"url(\" + thumbnailUrl + \")\",\r\n          }}\r\n        />\r\n      );\r\n    } else {\r\n      icon = browserProps.icons[this.getFileType()] || browserProps.icons.File;\r\n    }\r\n\r\n    const inAction = isDragging || action;\r\n\r\n    const ConfirmDeletionRenderer = browserProps.confirmDeletionRenderer;\r\n\r\n    let name;\r\n    if (showName) {\r\n      if (!inAction && isDeleting && browserProps.selection.length === 1) {\r\n        name = (\r\n          <ConfirmDeletionRenderer\r\n            handleDeleteSubmit={this.handleDeleteSubmit}\r\n            handleFileClick={this.handleFileClick}\r\n            url={url}\r\n          >\r\n            {this.getName()}\r\n          </ConfirmDeletionRenderer>\r\n        );\r\n      } else if (!inAction && isRenaming) {\r\n        name = (\r\n          <form className=\"renaming\" onSubmit={this.handleRenameSubmit}>\r\n            <input\r\n              ref={(el) => {\r\n                this.newNameRef = el;\r\n              }}\r\n              type=\"text\"\r\n              value={this.state.newName}\r\n              onChange={this.handleNewNameChange}\r\n              onBlur={this.handleCancelEdit}\r\n              autoFocus\r\n            />\r\n          </form>\r\n        );\r\n      } else {\r\n        name = (\r\n          <a href={url} download=\"download\" onClick={this.handleFileClick}>\r\n            {this.getName()}\r\n          </a>\r\n        );\r\n      }\r\n    }\r\n\r\n    let size;\r\n    if (showSize) {\r\n      if (!isRenaming && !isDeleting) {\r\n        size = (\r\n          <span className=\"size\">\r\n            <small>{fileSize(this.props.size)}</small>\r\n          </span>\r\n        );\r\n      }\r\n    }\r\n    let modified;\r\n    if (showModified) {\r\n      if (!isRenaming && !isDeleting) {\r\n        modified = (\r\n          <span className=\"modified\">\r\n            Last modified:{\" \"}\r\n            {formatDistanceToNow(this.props.modified, { addSuffix: true })}\r\n          </span>\r\n        );\r\n      }\r\n    }\r\n\r\n    let rowProps = {};\r\n    if (isSelectable) {\r\n      rowProps = {\r\n        onClick: this.handleItemClick,\r\n      };\r\n    }\r\n\r\n    let row = (\r\n      <li\r\n        className={ClassNames(\"file\", {\r\n          pending: action,\r\n          dragging: isDragging,\r\n          dragover: isOver,\r\n          selected: isSelected,\r\n        })}\r\n        onDoubleClick={this.handleItemDoubleClick}\r\n        {...rowProps}\r\n      >\r\n        <div className=\"item\">\r\n          <span className=\"thumb\">{icon}</span>\r\n          <span className=\"name\">{name}</span>\r\n          <span className=\"status\">\r\n            <span className=\"encrypted-icon\">\r\n              {this.props.status === \"encrypted\"\r\n                ? browserProps.icons.Lock\r\n                : null}\r\n            </span>\r\n            {this.props.status}\r\n          </span>\r\n          {size}\r\n          {modified}\r\n        </div>\r\n      </li>\r\n    );\r\n    if (typeof browserProps.moveFile === \"function\") {\r\n      row = connectDragPreview(row);\r\n    }\r\n\r\n    return this.connectDND(row);\r\n  }\r\n}\r\n\r\n@DragSource(\r\n  \"file\",\r\n  BaseFileConnectors.dragSource,\r\n  BaseFileConnectors.dragCollect\r\n)\r\n@DropTarget(\r\n  [\"file\", \"folder\", NativeTypes.FILE],\r\n  BaseFileConnectors.targetSource,\r\n  BaseFileConnectors.targetCollect\r\n)\r\nclass ListThumbnailFile extends RawListThumbnailFile {}\r\n\r\nexport default ListThumbnailFile;\r\nexport { RawListThumbnailFile };\r\n","import React from 'react'\r\n\r\nimport ListThumbnailFile from './list-thumbnail.js'\r\n\r\nclass SimpleListThumbnailFile extends React.Component {\r\n  render() {\r\n    return (\r\n      <ListThumbnailFile\r\n        {...this.props}\r\n        showName={false}\r\n        showSize={false}\r\n        showModified={false}\r\n        isSelectable={false}\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default SimpleListThumbnailFile\r\n","import React from \"react\";\r\nimport ClassNames from \"classnames\";\r\nimport { DragSource, DropTarget } from \"react-dnd\";\r\nimport { NativeTypes } from \"react-dnd-html5-backend\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\nimport BaseFile, { BaseFileConnectors } from \"./../base-file.js\";\r\nimport { fileSize } from \"./utils.js\";\r\n\r\nclass RawTableFile extends BaseFile {\r\n  render() {\r\n    const {\r\n      isDragging,\r\n      isDeleting,\r\n      isRenaming,\r\n      isOver,\r\n      isSelected,\r\n      action,\r\n      url,\r\n      browserProps,\r\n      connectDragPreview,\r\n      depth,\r\n      isShouldShowShared,\r\n      isShouldShowSharedWithWhom,\r\n      sharer,\r\n      shared_with,\r\n      size,\r\n      status,\r\n      modified,\r\n    } = this.props;\r\n\r\n    const icon =\r\n      browserProps.icons[this.getFileType()] || browserProps.icons.File;\r\n    const inAction = isDragging || action;\r\n\r\n    const ConfirmDeletionRenderer = browserProps.confirmDeletionRenderer;\r\n\r\n    let name;\r\n    if (!inAction && isDeleting && browserProps.selection.length === 1) {\r\n      name = (\r\n        <ConfirmDeletionRenderer\r\n          handleDeleteSubmit={this.handleDeleteSubmit}\r\n          handleFileClick={this.handleFileClick}\r\n          url={url}\r\n        >\r\n          {icon}\r\n          {this.getName()}\r\n        </ConfirmDeletionRenderer>\r\n      );\r\n    } else if (!inAction && isRenaming) {\r\n      name = (\r\n        <form className=\"renaming\" onSubmit={this.handleRenameSubmit}>\r\n          {icon}\r\n          <input\r\n            ref={(el) => {\r\n              this.newNameRef = el;\r\n            }}\r\n            type=\"text\"\r\n            value={this.state.newName}\r\n            onChange={this.handleNewNameChange}\r\n            onBlur={this.handleCancelEdit}\r\n            autoFocus\r\n          />\r\n        </form>\r\n      );\r\n    } else {\r\n      name = (\r\n        <a href={url || \"#\"} download=\"download\" onClick={this.handleFileClick}>\r\n          {icon}\r\n          {this.getName()}\r\n        </a>\r\n      );\r\n    }\r\n\r\n    let draggable = <div>{name}</div>;\r\n    if (typeof browserProps.moveFile === \"function\") {\r\n      draggable = connectDragPreview(draggable);\r\n    }\r\n\r\n    const row = (\r\n      <tr\r\n        className={ClassNames(\"file\", {\r\n          pending: action,\r\n          dragging: isDragging,\r\n          dragover: isOver,\r\n          selected: isSelected,\r\n        })}\r\n        onClick={this.handleItemClick}\r\n        onDoubleClick={this.handleItemDoubleClick}\r\n      >\r\n        <td className=\"name\">\r\n          <span className=\"checkbox-icon\">\r\n            {isSelected\r\n              ? browserProps.icons.Checked\r\n              : browserProps.icons.Unchecked}\r\n          </span>\r\n          <span style={{ paddingLeft: depth * 16 + \"px\" }}>{draggable}</span>\r\n        </td>\r\n        {this.props.isShouldShowShared ? (\r\n          <td className=\"size\">{sharer}</td>\r\n        ) : null}\r\n        {this.props.isShouldShowSharedWithWhom ? (\r\n          <td className=\"size\">{shared_with}</td>\r\n        ) : null}\r\n        <td className=\"size\">{fileSize(size)}</td>\r\n        <td className=\"modified\">\r\n          <span className=\"encrypted-icon\">\r\n            {this.props.status === \"encrypted\" ? browserProps.icons.Lock : null}\r\n          </span>\r\n          {status}\r\n        </td>\r\n        <td className=\"modified\">\r\n          {typeof modified === \"undefined\"\r\n            ? \"-\"\r\n            : formatDistanceToNow(modified, { addSuffix: true })}\r\n        </td>\r\n      </tr>\r\n    );\r\n\r\n    return this.connectDND(row);\r\n  }\r\n}\r\n\r\n@DragSource(\r\n  \"file\",\r\n  BaseFileConnectors.dragSource,\r\n  BaseFileConnectors.dragCollect\r\n)\r\n@DropTarget(\r\n  [\"file\", \"folder\", NativeTypes.FILE],\r\n  BaseFileConnectors.targetSource,\r\n  BaseFileConnectors.targetCollect\r\n)\r\nclass TableFile extends RawTableFile {}\r\n\r\nexport default TableFile;\r\nexport { RawTableFile };\r\n","// @ts-nocheck\r\nimport PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport { moveFilesAndFolders } from './utils'\r\n\r\nclass BaseFolder extends React.Component {\r\n  static propTypes = {\r\n    name: PropTypes.string,\r\n    fileKey: PropTypes.string,\r\n\r\n    newName: PropTypes.string,\r\n    keyDerived: PropTypes.bool,\r\n    isDraft: PropTypes.bool,\r\n    isRenaming: PropTypes.bool,\r\n    isDeleting: PropTypes.bool,\r\n\r\n    connectDragSource: PropTypes.func,\r\n    connectDropTarget: PropTypes.func,\r\n    isDragging: PropTypes.bool,\r\n    action: PropTypes.string,\r\n\r\n    browserProps: PropTypes.shape({\r\n      select: PropTypes.func,\r\n      toggleFolder: PropTypes.func,\r\n      beginAction: PropTypes.func,\r\n      endAction: PropTypes.func,\r\n      preview: PropTypes.func,\r\n\r\n      createFiles: PropTypes.func,\r\n      createFolder: PropTypes.func,\r\n      moveFile: PropTypes.func,\r\n      moveFolder: PropTypes.func,\r\n      renameFolder: PropTypes.func,\r\n      deleteFolder: PropTypes.func,\r\n    }),\r\n  }\r\n\r\n  state = {\r\n    newName: this.props.isDraft ? 'New folder' : this.getName(),\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.isDraft) {\r\n      this.selectAllNewName()\r\n    }\r\n  }\r\n  componentDidUpdate(oldProps, oldState) {\r\n    if (!oldProps.isRenaming && this.props.isRenaming) {\r\n      this.selectAllNewName()\r\n    }\r\n  }\r\n  selectAllNewName = () => {\r\n    window.requestAnimationFrame(() => {\r\n      const currentName = this.newNameRef.value\r\n      this.newNameRef.setSelectionRange(0, currentName.length)\r\n      this.newNameRef.focus()\r\n    })\r\n  }\r\n\r\n  getName() {\r\n    if (this.props.name) {\r\n      return this.props.name\r\n    }\r\n    const folders = this.props.fileKey.split('/')\r\n    return this.props.newName || folders[folders.length - 2]\r\n  }\r\n\r\n  handleFolderClick = (event) => {\r\n    event.stopPropagation()\r\n    this.props.browserProps.select(this.props.fileKey, 'folder', event.ctrlKey || event.metaKey, event.shiftKey)\r\n  }\r\n  handleFolderDoubleClick = (event) => {\r\n    event.stopPropagation()\r\n    this.toggleFolder()\r\n  }\r\n\r\n  handleRenameClick = (event) => {\r\n    if (!this.props.browserProps.renameFolder) {\r\n      return\r\n    }\r\n    this.props.browserProps.beginAction('rename', this.props.fileKey)\r\n  }\r\n  handleNewNameChange = (event) => {\r\n    const newName = this.newNameRef.value\r\n    this.setState({ newName: newName })\r\n  }\r\n  handleRenameSubmit = (event) => {\r\n    event.preventDefault()\r\n    if (!this.props.browserProps.renameFolder && !this.props.isDraft) {\r\n      return\r\n    }\r\n    const newName = this.state.newName.trim()\r\n    if (newName.length === 0) {\r\n      // todo: move to props handler\r\n      // window.notify({\r\n      //   style: 'error',\r\n      //   title: 'Invalid new folder name',\r\n      //   body: 'Folder name cannot be blank',\r\n      // })\r\n      return\r\n    }\r\n    const invalidChar = ['/', '\\\\']\r\n    if (invalidChar.some(char => newName.indexOf(char) !== -1)) return\r\n    // todo: move to props handler\r\n    // window.notify({\r\n    //   style: 'error',\r\n    //   title: 'Invalid new folder name',\r\n    //   body: 'Folder names cannot contain forward slashes.',\r\n    // })\r\n\r\n    let newKey = this.props.fileKey.substr(0, this.props.fileKey.substr(0, this.props.fileKey.length - 1).lastIndexOf('/'))\r\n    if (newKey.length) {\r\n      newKey += '/'\r\n    }\r\n    newKey += newName\r\n    newKey += '/'\r\n    if (this.props.isDraft) {\r\n      this.props.browserProps.createFolder(newKey)\r\n    } else {\r\n      this.props.browserProps.renameFolder(this.props.fileKey, newKey)\r\n    }\r\n  }\r\n\r\n  handleDeleteClick = (event) => {\r\n    if (!this.props.browserProps.deleteFolder) {\r\n      return\r\n    }\r\n    this.props.browserProps.beginAction('delete', this.props.fileKey)\r\n  }\r\n  handleDeleteSubmit = (event) => {\r\n    event.preventDefault()\r\n    if (!this.props.browserProps.deleteFolder) {\r\n      return\r\n    }\r\n    this.props.browserProps.deleteFolder(this.props.browserProps.actionTargets)\r\n  }\r\n\r\n  handleCancelEdit = (event) => {\r\n    this.props.browserProps.endAction()\r\n  }\r\n\r\n  toggleFolder = () => {\r\n    this.props.browserProps.toggleFolder(this.props.fileKey)\r\n  }\r\n\r\n  connectDND(render) {\r\n    const inAction = (this.props.isDragging || this.props.action)\r\n    if (this.props.keyDerived) {\r\n      if (\r\n        typeof this.props.browserProps.moveFolder === 'function' &&\r\n        !inAction &&\r\n        !this.props.isRenaming &&\r\n        !this.props.isDeleting\r\n      ) {\r\n        render = this.props.connectDragSource(render)\r\n      }\r\n      if (\r\n        typeof this.props.browserProps.createFiles === 'function' ||\r\n        typeof this.props.browserProps.moveFolder === 'function' ||\r\n        typeof this.props.browserProps.moveFile === 'function'\r\n      ) {\r\n        render = this.props.connectDropTarget(render)\r\n      }\r\n    }\r\n    return render\r\n  }\r\n}\r\n\r\nconst dragSource = {\r\n  beginDrag(props) {\r\n    if (!props.browserProps.selection.length) {\r\n      props.browserProps.select(props.fileKey, 'folder')\r\n    }\r\n    return {\r\n      key: props.fileKey,\r\n    }\r\n  },\r\n\r\n  endDrag(props, monitor, component) {\r\n    moveFilesAndFolders(props, monitor, component)\r\n  },\r\n}\r\n\r\nfunction dragCollect(connect, monitor) {\r\n  return {\r\n    connectDragPreview: connect.dragPreview(),\r\n    connectDragSource: connect.dragSource(),\r\n    isDragging: monitor.isDragging(),\r\n  }\r\n}\r\n\r\nconst BaseFolderConnectors = {\r\n  dragSource,\r\n  dragCollect,\r\n}\r\n\r\nexport default BaseFolder\r\nexport {\r\n  BaseFolderConnectors,\r\n}\r\n","import React from \"react\";\r\nimport ClassNames from \"classnames\";\r\nimport { DragSource, DropTarget } from \"react-dnd\";\r\nimport { NativeTypes } from \"react-dnd-html5-backend\";\r\n\r\nimport BaseFolder, { BaseFolderConnectors } from \"./../base-folder.js\";\r\nimport { BaseFileConnectors } from \"./../base-file.js\";\r\n\r\nimport { isFolder } from \"../utils\";\r\n\r\nclass RawListThumbnailFolder extends BaseFolder {\r\n  render() {\r\n    const {\r\n      isOpen,\r\n      isDragging,\r\n      isDeleting,\r\n      isRenaming,\r\n      isDraft,\r\n      isOver,\r\n      isSelected,\r\n      url,\r\n      action,\r\n      browserProps,\r\n      depth,\r\n      keyDerived,\r\n      connectDragPreview,\r\n    } = this.props;\r\n\r\n    const icon = browserProps.icons[isOpen ? \"FolderOpen\" : \"Folder\"];\r\n\r\n    const inAction = isDragging || action;\r\n\r\n    const ConfirmDeletionRenderer = browserProps.confirmDeletionRenderer;\r\n\r\n    let name;\r\n    if (!inAction && isDeleting && browserProps.selection.length === 1) {\r\n      name = (\r\n        <ConfirmDeletionRenderer\r\n          handleDeleteSubmit={this.handleDeleteSubmit}\r\n          handleFileClick={this.handleFileClick}\r\n          url={url}\r\n        >\r\n          {this.getName()}\r\n        </ConfirmDeletionRenderer>\r\n      );\r\n    } else if ((!inAction && isRenaming) || isDraft) {\r\n      name = (\r\n        <div>\r\n          <form className=\"renaming\" onSubmit={this.handleRenameSubmit}>\r\n            <input\r\n              type=\"text\"\r\n              ref={(el) => {\r\n                this.newNameRef = el;\r\n              }}\r\n              value={this.state.newName}\r\n              onChange={this.handleNewNameChange}\r\n              onBlur={this.handleCancelEdit}\r\n              autoFocus\r\n            />\r\n          </form>\r\n        </div>\r\n      );\r\n    } else {\r\n      name = (\r\n        <div>\r\n          <a onClick={this.toggleFolder}>{this.getName()}</a>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    let children;\r\n    if (isOpen && browserProps.nestChildren) {\r\n      children = [];\r\n      for (let childIndex = 0; childIndex < children.length; childIndex++) {\r\n        const file = children[childIndex];\r\n\r\n        const thisItemProps = {\r\n          ...browserProps.getItemProps(file, browserProps),\r\n          depth: depth + 1,\r\n        };\r\n\r\n        if (!isFolder(file)) {\r\n          children.push(\r\n            <browserProps.fileRenderer\r\n              {...file}\r\n              {...thisItemProps}\r\n              browserProps={browserProps}\r\n              {...browserProps.fileRendererProps}\r\n            />\r\n          );\r\n        } else {\r\n          children.push(\r\n            <browserProps.folderRenderer\r\n              {...file}\r\n              {...thisItemProps}\r\n              browserProps={browserProps}\r\n              {...browserProps.folderRendererProps}\r\n            />\r\n          );\r\n        }\r\n      }\r\n      if (children.length) {\r\n        children = (\r\n          <ul style={{ padding: \"0 8px\", paddingLeft: \"16px\" }}>{children}</ul>\r\n        );\r\n      } else {\r\n        children = <p>No items in this folder</p>;\r\n      }\r\n    }\r\n\r\n    let folder = (\r\n      <li\r\n        className={ClassNames(\"folder\", {\r\n          expanded: isOpen && browserProps.nestChildren,\r\n          pending: action,\r\n          dragging: isDragging,\r\n          dragover: isOver,\r\n          selected: isSelected,\r\n        })}\r\n        onClick={this.handleFolderClick}\r\n        onDoubleClick={this.handleFolderDoubleClick}\r\n      >\r\n        <div className=\"item\">\r\n          <span className=\"thumb\">{icon}</span>\r\n          <span className=\"name\">{name}</span>\r\n        </div>\r\n        {children}\r\n      </li>\r\n    );\r\n    if (typeof browserProps.moveFolder === \"function\" && keyDerived) {\r\n      folder = connectDragPreview(folder);\r\n    }\r\n\r\n    return this.connectDND(folder);\r\n  }\r\n}\r\n\r\n@DragSource(\r\n  \"folder\",\r\n  BaseFolderConnectors.dragSource,\r\n  BaseFolderConnectors.dragCollect\r\n)\r\n@DropTarget(\r\n  [\"file\", \"folder\", NativeTypes.FILE],\r\n  BaseFileConnectors.targetSource,\r\n  BaseFileConnectors.targetCollect\r\n)\r\nclass ListThumbnailFolder extends RawListThumbnailFolder {}\r\n\r\nexport default ListThumbnailFolder;\r\nexport { RawListThumbnailFolder };\r\n","import React from \"react\";\r\nimport ClassNames from \"classnames\";\r\nimport { DragSource, DropTarget } from \"react-dnd\";\r\nimport { NativeTypes } from \"react-dnd-html5-backend\";\r\n\r\nimport BaseFolder, { BaseFolderConnectors } from \"./../base-folder.js\";\r\nimport { BaseFileConnectors } from \"./../base-file.js\";\r\n\r\nclass RawTableFolder extends BaseFolder {\r\n  render() {\r\n    const {\r\n      isOpen,\r\n      isDragging,\r\n      isDeleting,\r\n      isRenaming,\r\n      isDraft,\r\n      isOver,\r\n      isSelected,\r\n      action,\r\n      url,\r\n      isShouldShowShared,\r\n      browserProps,\r\n      connectDragPreview,\r\n      depth,\r\n    } = this.props;\r\n\r\n    const icon = browserProps.icons[isOpen ? \"FolderOpen\" : \"Folder\"];\r\n    const inAction = isDragging || action;\r\n\r\n    const ConfirmDeletionRenderer = browserProps.confirmDeletionRenderer;\r\n\r\n    let name;\r\n    if (!inAction && isDeleting && browserProps.selection.length === 1) {\r\n      name = (\r\n        <ConfirmDeletionRenderer\r\n          handleDeleteSubmit={this.handleDeleteSubmit}\r\n          handleFileClick={this.handleFileClick}\r\n          url={url}\r\n        >\r\n          {icon}\r\n          {this.getName()}\r\n        </ConfirmDeletionRenderer>\r\n      );\r\n    } else if ((!inAction && isRenaming) || isDraft) {\r\n      name = (\r\n        <div>\r\n          <form className=\"renaming\" onSubmit={this.handleRenameSubmit}>\r\n            {icon}\r\n            <input\r\n              type=\"text\"\r\n              ref={(el) => {\r\n                this.newNameRef = el;\r\n              }}\r\n              value={this.state.newName}\r\n              onChange={this.handleNewNameChange}\r\n              onBlur={this.handleCancelEdit}\r\n              autoFocus\r\n            />\r\n          </form>\r\n        </div>\r\n      );\r\n    } else {\r\n      name = (\r\n        <div>\r\n          <a onClick={this.toggleFolder}>\r\n            {icon}\r\n            {this.getName()}\r\n          </a>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    let draggable = <div>{name}</div>;\r\n    if (typeof browserProps.moveFile === \"function\") {\r\n      draggable = connectDragPreview(draggable);\r\n    }\r\n\r\n    const folder = (\r\n      <tr\r\n        className={ClassNames(\"folder\", {\r\n          pending: action,\r\n          dragging: isDragging,\r\n          dragover: isOver,\r\n          selected: isSelected,\r\n        })}\r\n        onClick={this.handleFolderClick}\r\n        onDoubleClick={this.handleFolderDoubleClick}\r\n      >\r\n        <td className=\"name\">\r\n          <span className=\"checkbox-icon\">\r\n            {isSelected\r\n              ? browserProps.icons.Checked\r\n              : browserProps.icons.Unchecked}\r\n          </span>\r\n          <span style={{ paddingLeft: depth * 16 + \"px\" }}>{draggable}</span>\r\n        </td>\r\n        {this.props.isShouldShowShared ? <td /> : null}\r\n        {this.props.isShouldShowSharedWithWhom ? <td /> : null}\r\n        <td />\r\n        <td />\r\n        <td />\r\n      </tr>\r\n    );\r\n\r\n    return this.connectDND(folder);\r\n  }\r\n}\r\n\r\n@DragSource(\r\n  \"folder\",\r\n  BaseFolderConnectors.dragSource,\r\n  BaseFolderConnectors.dragCollect\r\n)\r\n@DropTarget(\r\n  [\"file\", \"folder\", NativeTypes.FILE],\r\n  BaseFileConnectors.targetSource,\r\n  BaseFileConnectors.targetCollect\r\n)\r\nclass TableFolder extends RawTableFolder {}\r\n\r\nexport default TableFolder;\r\nexport { RawTableFolder };\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst ConfirmDeletion = (props) => {\r\n  const {\r\n    children,\r\n    handleDeleteSubmit,\r\n    handleFileClick,\r\n    url,\r\n  } = props\r\n\r\n  return (\r\n    <form className=\"deleting\" onSubmit={handleDeleteSubmit}>\r\n      <a\r\n        href={url}\r\n        download=\"download\"\r\n        onClick={handleFileClick}\r\n      >\r\n        {children}\r\n      </a>\r\n      <div>\r\n        <button type=\"submit\">\r\n          Confirm Deletion\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nConfirmDeletion.propTypes = {\r\n  children: PropTypes.node,\r\n  handleDeleteSubmit: PropTypes.func,\r\n  handleFileClick: PropTypes.func,\r\n  url: PropTypes.string,\r\n}\r\n\r\nConfirmDeletion.defaultProps = {\r\n  url: '#',\r\n}\r\n\r\nexport default ConfirmDeletion\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst MultipleConfirmDeletion = (props) => {\r\n  const {\r\n    handleDeleteSubmit,\r\n  } = props\r\n\r\n  return (\r\n    <button className=\"deleting\" onClick={handleDeleteSubmit}>\r\n      Confirm Deletion\r\n    </button>\r\n  )\r\n}\r\n\r\nMultipleConfirmDeletion.propTypes = {\r\n  handleDeleteSubmit: PropTypes.func,\r\n}\r\n\r\nexport default MultipleConfirmDeletion\r\n","import { isFolder } from '../utils'\r\n\r\nexport default function(files, root) {\r\n  const fileTree = {\r\n    contents: [],\r\n    children: {},\r\n  }\r\n\r\n  files.map((file) => {\r\n    file.relativeKey = (file.newKey || file.key).substr(root.length)\r\n    let currentFolder = fileTree\r\n    const folders = file.relativeKey.split('/')\r\n    folders.map((folder, folderIndex) => {\r\n      if (folderIndex === folders.length - 1 && isFolder(file)) {\r\n        for (const key in file) {\r\n          currentFolder[key] = file[key]\r\n        }\r\n      }\r\n      if (folder === '') {\r\n        return\r\n      }\r\n      const isAFile = (!isFolder(file) && (folderIndex === folders.length - 1))\r\n      if (isAFile) {\r\n        currentFolder.contents.push({\r\n          ...file,\r\n          keyDerived: true,\r\n        })\r\n      } else {\r\n        if (folder in currentFolder.children === false) {\r\n          currentFolder.children[folder] = {\r\n            contents: [],\r\n            children: {},\r\n          }\r\n        }\r\n        currentFolder = currentFolder.children[folder]\r\n      }\r\n    })\r\n  })\r\n\r\n  function addAllChildren(level, prefix) {\r\n    if (prefix !== '') {\r\n      prefix += '/'\r\n    }\r\n    let files = []\r\n    for (const folder in level.children) {\r\n      files.push({\r\n        ...level.children[folder],\r\n        contents: undefined,\r\n        keyDerived: true,\r\n        key: root + prefix + folder + '/',\r\n        relativeKey: prefix + folder + '/',\r\n        children: addAllChildren(level.children[folder], prefix + folder),\r\n        size: 0,\r\n      })\r\n    }\r\n    files = files.concat(level.contents)\r\n    return files\r\n  }\r\n\r\n  files = addAllChildren(fileTree, '')\r\n  return files\r\n}\r\n","import { format, startOfMonth, endOfMonth } from 'date-fns'\r\nimport { relativeTimeWindows } from './utils'\r\nimport { isFolder } from '../utils'\r\n\r\nexport default function(files, root) {\r\n  const timeWindows = relativeTimeWindows()\r\n\r\n  for (let fileIndex = 0; fileIndex < files.length; fileIndex++) {\r\n    const file = files[fileIndex]\r\n    if (isFolder(file)) { continue }\r\n    const newFile = {\r\n      ...file,\r\n      keyDerived: true,\r\n    }\r\n\r\n    let allocated = false\r\n    const fileModified = +newFile.modified\r\n    for (let windex = 0; windex < timeWindows.length; windex++) {\r\n      const timeWindow = timeWindows[windex]\r\n      if (fileModified > +timeWindow.begins && fileModified <= +timeWindow.ends) {\r\n        timeWindow.items.push(newFile)\r\n        allocated = true\r\n        break\r\n      }\r\n    }\r\n    if (!allocated) {\r\n      const newWindow = {\r\n        name: format(newFile.modified, 'MMMM yyyy'),\r\n        begins: startOfMonth(newFile.modified),\r\n        ends: endOfMonth(newFile.modified),\r\n        items: [],\r\n      }\r\n      newWindow.items.push(newFile)\r\n      timeWindows.push(newWindow)\r\n    }\r\n  }\r\n\r\n  const grouped = []\r\n  for (let windex = 0; windex < timeWindows.length; windex++) {\r\n    const timeWindow = timeWindows[windex]\r\n    if (!timeWindow.items.length) { continue }\r\n    grouped.push({\r\n      key: `${timeWindow.name.toLowerCase().replace(' ', '_')}/`,\r\n      name: timeWindow.name,\r\n      children: timeWindow.items,\r\n      size: 0,\r\n    })\r\n  }\r\n\r\n  return grouped\r\n}\r\n","// @ts-nocheck\r\nimport {\r\n  startOfToday,\r\n  endOfToday,\r\n  startOfYesterday,\r\n  endOfYesterday,\r\n  startOfWeek,\r\n  endOfWeek,\r\n  addWeeks,\r\n  startOfMonth,\r\n  endOfMonth,\r\n  getMonth,\r\n} from 'date-fns'\r\n\r\nfunction relativeTimeWindows() {\r\n  const windows = []\r\n  const now = new Date()\r\n  windows.push({\r\n    name: 'Today',\r\n    begins: startOfToday(),\r\n    ends: endOfToday(),\r\n    items: [],\r\n  })\r\n  windows.push({\r\n    name: 'Yesterday',\r\n    begins: startOfYesterday(),\r\n    ends: endOfYesterday(),\r\n    items: [],\r\n  })\r\n  windows.push({\r\n    name: 'Earlier this Week',\r\n    begins: startOfWeek(now),\r\n    ends: endOfWeek(now),\r\n    items: [],\r\n  })\r\n  windows.push({\r\n    name: 'Last Week',\r\n    begins: startOfWeek(addWeeks(now, -1)),\r\n    ends: endOfWeek(addWeeks(now, -1)),\r\n    items: [],\r\n  })\r\n  if (getMonth(windows[windows.length - 1].begins) === getMonth(now)) {\r\n    windows.push({\r\n      name: 'Earlier this Month',\r\n      begins: startOfMonth(now),\r\n      ends: endOfMonth(now),\r\n      items: [],\r\n    })\r\n  }\r\n  return windows\r\n}\r\n\r\nexport { relativeTimeWindows }\r\n","const NUMBER_GROUPS = /(-?\\d*\\.?\\d+)/g\r\n\r\nfunction naturalSortComparer(a, b) {\r\n  const aa = String(a.name).split(NUMBER_GROUPS)\r\n  const bb = String(b.name).split(NUMBER_GROUPS)\r\n  const min = Math.min(aa.length, bb.length)\r\n\r\n  for (let i = 0; i < min; i++) {\r\n    const x = parseFloat(aa[i]) || aa[i].toLowerCase()\r\n    const y = parseFloat(bb[i]) || bb[i].toLowerCase()\r\n    if (x < y) return -1\r\n    else if (x > y) return 1\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\nexport { naturalSortComparer }\r\n","import { naturalSortComparer } from './utils.js'\r\n\r\nfunction naturalDraftComparer(a, b) {\r\n  if (a.draft && !b.draft) {\r\n    return 1\r\n  } else if (b.draft && !a.draft) {\r\n    return -1\r\n  }\r\n  return naturalSortComparer(a, b)\r\n}\r\n\r\nfunction naturalSort(allFiles) {\r\n  let folders = []\r\n  let files = []\r\n\r\n  for (let fileIndex = 0; fileIndex < allFiles.length; fileIndex++) {\r\n    const file = allFiles[fileIndex]\r\n    const keyFolders = (file.newKey || file.key).split('/')\r\n    if (file.children) {\r\n      if (!file.name) {\r\n        file.name = keyFolders[keyFolders.length - 2]\r\n      }\r\n      folders.push(file)\r\n    } else {\r\n      if (!file.name) {\r\n        file.name = keyFolders[keyFolders.length - 1]\r\n      }\r\n      files.push(file)\r\n    }\r\n  }\r\n\r\n  files = files.sort(naturalSortComparer)\r\n  folders = folders.sort(naturalDraftComparer)\r\n\r\n  for (let folderIndex = 0; folderIndex < folders.length; folderIndex++) {\r\n    const folder = folders[folderIndex]\r\n    folder.children = naturalSort(folder.children)\r\n  }\r\n\r\n  let sortedFiles = []\r\n  sortedFiles = sortedFiles.concat(folders)\r\n  sortedFiles = sortedFiles.concat(files)\r\n  return sortedFiles\r\n}\r\n\r\nexport default function(files) {\r\n  return naturalSort(files)\r\n}\r\n","import { compareAsc } from 'date-fns'\r\n\r\nfunction lastModifiedSort(allFiles) {\r\n  const folders = []\r\n  let files = []\r\n  for (let fileIndex = 0; fileIndex < allFiles.length; fileIndex++) {\r\n    const file = allFiles[fileIndex]\r\n    const keyFolders = (file.newKey || file.key).split('/')\r\n    if (file.children) {\r\n      // file.name = keyFolders[keyFolders.length - 2]\r\n      folders.push(file)\r\n    } else {\r\n      file.name = keyFolders[keyFolders.length - 1]\r\n      files.push(file)\r\n    }\r\n  }\r\n\r\n  files = files.sort(compareAsc)\r\n\r\n  for (let folderIndex = 0; folderIndex < folders.length; folderIndex++) {\r\n    const folder = folders[folderIndex]\r\n    folder.children = lastModifiedSort(folder.children)\r\n  }\r\n\r\n  let sortedFiles = []\r\n  sortedFiles = sortedFiles.concat(folders)\r\n  sortedFiles = sortedFiles.concat(files)\r\n  return sortedFiles\r\n}\r\n\r\nexport default function(files) {\r\n  return lastModifiedSort(files)\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Actions = (props) => {\r\n  const {\r\n    selectedItems,\r\n    isFolder,\r\n    icons,\r\n    nameFilter,\r\n\r\n    canCreateFolder,\r\n    onCreateFolder,\r\n\r\n    canRenameFile,\r\n    onRenameFile,\r\n\r\n    canRenameFolder,\r\n    onRenameFolder,\r\n\r\n    canDeleteFile,\r\n    onDeleteFile,\r\n\r\n    canDeleteFolder,\r\n    onDeleteFolder,\r\n\r\n    canDownloadFile,\r\n    onDownloadFile,\r\n  } = props;\r\n\r\n  /** @type any */\r\n  let actions = [];\r\n\r\n  if (selectedItems.length) {\r\n    // Something is selected. Build custom actions depending on what it is.\r\n    const selectedItemsAction = selectedItems.filter((item) => item.action);\r\n    if (\r\n      selectedItemsAction.length === selectedItems.length &&\r\n      [...new Set(selectedItemsAction)].length === 1\r\n    ) {\r\n      // Selected item has an active action against it. Disable all other actions.\r\n      let actionText;\r\n      switch (selectedItemsAction[0].action) {\r\n        case \"delete\":\r\n          actionText = \"Deleting ...\";\r\n          break;\r\n\r\n        case \"rename\":\r\n          actionText = \"Renaming ...\";\r\n          break;\r\n\r\n        default:\r\n          actionText = \"Moving ...\";\r\n          break;\r\n      }\r\n\r\n      actions = (\r\n        // TODO: Enable plugging in custom spinner.\r\n        <div className=\"item-actions\">\r\n          {icons.Loading} {actionText}\r\n        </div>\r\n      );\r\n    } else {\r\n      if (isFolder && canCreateFolder && !nameFilter) {\r\n        actions.push(\r\n          <li onClick={onCreateFolder} key=\"action-add-folder\">\r\n            <span className=\"icon-cont\">{icons.FolderPlus}</span>\r\n            <a href=\"#\" role=\"button\">\r\n              &nbsp;Add Subfolder\r\n            </a>\r\n          </li>\r\n        );\r\n      }\r\n\r\n      const itemsWithoutKeyDerived = selectedItems.find(\r\n        (item) => !item.keyDerived\r\n      );\r\n      if (\r\n        !itemsWithoutKeyDerived &&\r\n        !isFolder &&\r\n        canRenameFile &&\r\n        selectedItems.length === 1\r\n      ) {\r\n        actions.push(\r\n          <li onClick={onRenameFile} key=\"action-rename\">\r\n            <span className=\"icon-cont\">{icons.Rename}</span>\r\n            <a href=\"#\" role=\"button\">\r\n              &nbsp;Rename\r\n            </a>\r\n          </li>\r\n        );\r\n      } else if (!itemsWithoutKeyDerived && isFolder && canRenameFolder) {\r\n        actions.push(\r\n          <li onClick={onRenameFolder} key=\"action-rename\">\r\n            <span className=\"icon-cont\">{icons.Rename}</span>\r\n            <a href=\"#\" role=\"button\">\r\n              &nbsp;Rename\r\n            </a>\r\n          </li>\r\n        );\r\n      }\r\n\r\n      if (!itemsWithoutKeyDerived && !isFolder && canDeleteFile) {\r\n        actions.push(\r\n          <li onClick={onDeleteFile} key=\"action-delete\">\r\n            <a href=\"#\" role=\"button\">\r\n              {icons.Delete}\r\n              &nbsp;Delete\r\n            </a>\r\n          </li>\r\n        );\r\n      } else if (!itemsWithoutKeyDerived && isFolder && canDeleteFolder) {\r\n        actions.push(\r\n          <li onClick={onDeleteFolder} key=\"action-delete\">\r\n            <a href=\"#\" role=\"button\">\r\n              {icons.Delete}\r\n              &nbsp;Delete\r\n            </a>\r\n          </li>\r\n        );\r\n      }\r\n\r\n      if (!isFolder && canDownloadFile) {\r\n        actions.push(\r\n          <li onClick={onDownloadFile} key=\"action-download\">\r\n            <a href=\"#\" role=\"button\">\r\n              {icons.Download}\r\n              &nbsp;Download\r\n            </a>\r\n          </li>\r\n        );\r\n      }\r\n\r\n      if (actions.length) {\r\n        actions = <ul className=\"item-actions\">{actions}</ul>;\r\n      } else {\r\n        actions = <div className=\"item-actions\">&nbsp;</div>;\r\n      }\r\n    }\r\n  } else {\r\n    // Nothing selected: We're in the 'root' folder. Only allowed action is adding a folder.\r\n    if (canCreateFolder && !nameFilter) {\r\n      actions.push(\r\n        <li onClick={onCreateFolder} key=\"action-add-folder\">\r\n          <span className=\"icon-cont\">{icons.FolderPlus}</span>\r\n          <a href=\"#\" role=\"button\">\r\n            &nbsp;Add Folder\r\n          </a>\r\n        </li>\r\n      );\r\n    }\r\n\r\n    if (actions.length) {\r\n      actions = <ul className=\"item-actions\">{actions}</ul>;\r\n    } else {\r\n      actions = <div className=\"item-actions\">&nbsp;</div>;\r\n    }\r\n  }\r\n\r\n  return actions;\r\n};\r\n\r\nActions.propTypes = {\r\n  selectedItems: PropTypes.arrayOf(PropTypes.object),\r\n  isFolder: PropTypes.bool,\r\n  icons: PropTypes.object,\r\n  nameFilter: PropTypes.string,\r\n\r\n  canCreateFolder: PropTypes.bool,\r\n  onCreateFolder: PropTypes.func,\r\n\r\n  canRenameFile: PropTypes.bool,\r\n  onRenameFile: PropTypes.func,\r\n\r\n  canRenameFolder: PropTypes.bool,\r\n  onRenameFolder: PropTypes.func,\r\n\r\n  canDeleteFile: PropTypes.bool,\r\n  onDeleteFile: PropTypes.func,\r\n\r\n  canDeleteFolder: PropTypes.bool,\r\n  onDeleteFolder: PropTypes.func,\r\n\r\n  canDownloadFile: PropTypes.bool,\r\n  onDownloadFile: PropTypes.func,\r\n};\r\n\r\nActions.defaultProps = {\r\n  selectedItems: [],\r\n  isFolder: false,\r\n  icons: {},\r\n  nameFilter: \"\",\r\n\r\n  canCreateFolder: false,\r\n  onCreateFolder: null,\r\n\r\n  canRenameFile: false,\r\n  onRenameFile: null,\r\n\r\n  canRenameFolder: false,\r\n  onRenameFolder: null,\r\n\r\n  canDeleteFile: false,\r\n  onDeleteFile: null,\r\n\r\n  canDeleteFolder: false,\r\n  onDeleteFolder: null,\r\n\r\n  canDownloadFile: false,\r\n  onDownloadFile: null,\r\n};\r\n\r\nexport default Actions;\r\n","import PropTypes from \"prop-types\";\r\nimport React, { Component, PureComponent } from \"react\";\r\n// drag and drop\r\nimport HTML5Backend from \"react-dnd-html5-backend\";\r\nimport { DragDropContext } from \"react-dnd\";\r\n\r\n// default components (most overridable)\r\nimport { DefaultDetail } from \"./details\";\r\nimport { DefaultFilter } from \"./filters\";\r\n\r\n// default renderers\r\nimport { TableHeader } from \"./headers\";\r\nimport { TableFile } from \"./files\";\r\nimport { TableFolder } from \"./folders\";\r\nimport {\r\n  DefaultConfirmDeletion,\r\n  MultipleConfirmDeletion,\r\n} from \"./confirmations\";\r\n\r\n// default processors\r\nimport { GroupByFolder } from \"./groupers\";\r\nimport { SortByName } from \"./sorters\";\r\n\r\nimport { isFolder } from \"./utils\";\r\nimport { DefaultAction } from \"./actions\";\r\nimport { includes } from \"lodash\";\r\n\r\nconst SEARCH_RESULTS_PER_PAGE = 20;\r\nconst regexForNewFolderOrFileSelection = /.*\\/__new__[/]?$/gm;\r\n\r\nfunction getItemProps(file, browserProps) {\r\n  return {\r\n    key: `file-${file.key}`,\r\n    fileKey: file.key,\r\n    isSelected: browserProps.selection.includes(file.key),\r\n    isOpen: file.key in browserProps.openFolders || browserProps.nameFilter,\r\n    isRenaming:\r\n      browserProps.activeAction === \"rename\" &&\r\n      browserProps.actionTargets.includes(file.key),\r\n    isDeleting:\r\n      browserProps.activeAction === \"delete\" &&\r\n      browserProps.actionTargets.includes(file.key),\r\n    isDraft: !!file.draft,\r\n  };\r\n}\r\n\r\nclass RawFileBrowser extends Component {\r\n  static propTypes = {\r\n    files: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        file_id: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\r\n          .isRequired,\r\n        key: PropTypes.string.isRequired,\r\n        status: PropTypes.oneOf([\"encrypted\", \"unencrypted\"]),\r\n        sharer: PropTypes.string,\r\n        shared_with: PropTypes.string,\r\n        modified: PropTypes.number,\r\n        created: PropTypes.number,\r\n        size: PropTypes.number,\r\n      })\r\n    ).isRequired,\r\n    actions: PropTypes.node,\r\n    showActionBar: PropTypes.bool.isRequired,\r\n    canFilter: PropTypes.bool.isRequired,\r\n    showFoldersOnFilter: PropTypes.bool,\r\n    noFilesMessage: PropTypes.string,\r\n\r\n    group: PropTypes.func.isRequired,\r\n    sort: PropTypes.func.isRequired,\r\n\r\n    icons: PropTypes.shape({\r\n      Folder: PropTypes.element,\r\n      FolderOpen: PropTypes.element,\r\n      File: PropTypes.element,\r\n      FolderPlus: PropTypes.element,\r\n      Image: PropTypes.element,\r\n      Video: PropTypes.element,\r\n      Audio: PropTypes.element,\r\n      Word: PropTypes.element,\r\n      Excel: PropTypes.element,\r\n      Archive: PropTypes.element,\r\n      Text: PropTypes.element,\r\n      PDF: PropTypes.element,\r\n      Delete: PropTypes.element,\r\n      Rename: PropTypes.element,\r\n      Loading: PropTypes.element,\r\n      Download: PropTypes.element,\r\n      Search: PropTypes.element,\r\n      Lock: PropTypes.element,\r\n    }),\r\n\r\n    nestChildren: PropTypes.bool.isRequired,\r\n    renderStyle: PropTypes.oneOf([\"list\", \"table\"]).isRequired,\r\n\r\n    startOpen: PropTypes.bool.isRequired, // TODO: remove?\r\n\r\n    headerRenderer: PropTypes.func,\r\n    headerRendererProps: PropTypes.object,\r\n    filterRenderer: PropTypes.func,\r\n    filterRendererProps: PropTypes.object,\r\n    fileRenderer: PropTypes.func,\r\n    fileRendererProps: PropTypes.object,\r\n    folderRenderer: PropTypes.func,\r\n    folderRendererProps: PropTypes.object,\r\n    detailRenderer: PropTypes.func,\r\n    detailRendererProps: PropTypes.object,\r\n    actionRenderer: PropTypes.func,\r\n    confirmDeletionRenderer: PropTypes.func,\r\n    confirmMultipleDeletionRenderer: PropTypes.func,\r\n\r\n    onSelectionChange: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onCreateFiles: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onCreateFolder: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onMoveFile: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onMoveFolder: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onRenameFile: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onRenameFolder: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onDeleteFile: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onDeleteFolder: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n    onDownloadFile: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\r\n\r\n    onSelect: PropTypes.func,\r\n    onSelectFile: PropTypes.func,\r\n    onSelectFolder: PropTypes.func,\r\n\r\n    onPreviewOpen: PropTypes.func,\r\n    onPreviewClose: PropTypes.func,\r\n\r\n    onFolderOpen: PropTypes.func,\r\n    onFolderClose: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    showActionBar: true,\r\n    canFilter: true,\r\n    showFoldersOnFilter: false,\r\n    noFilesMessage: \"No files.\",\r\n\r\n    group: GroupByFolder,\r\n    sort: SortByName,\r\n\r\n    nestChildren: false,\r\n    renderStyle: \"table\",\r\n\r\n    startOpen: false,\r\n\r\n    headerRenderer: TableHeader,\r\n    headerRendererProps: {},\r\n    filterRenderer: DefaultFilter,\r\n    filterRendererProps: {},\r\n    fileRenderer: TableFile,\r\n    fileRendererProps: {},\r\n    folderRenderer: TableFolder,\r\n    folderRendererProps: {},\r\n    detailRenderer: DefaultDetail,\r\n    detailRendererProps: {},\r\n    actionRenderer: DefaultAction,\r\n\r\n    icons: {},\r\n\r\n    onSelect: (fileOrFolder) => {}, // Always called when a file or folder is selected\r\n    onSelectFile: (file) => {}, //    Called after onSelect, only on file selection\r\n    onSelectFolder: (folder) => {}, //    Called after onSelect, only on folder selection\r\n    onSelectionChange: (selection) => {}, // Pass selection state up\r\n    onPreviewOpen: (file) => {}, // File opened\r\n    onPreviewClose: (file) => {}, // File closed\r\n\r\n    onFolderOpen: (folder) => {}, // Folder opened\r\n    onFolderClose: (folder) => {}, // Folder closed\r\n\r\n    isShouldInvokeCreateFolder: false,\r\n    isShouldFireRename: false,\r\n  };\r\n\r\n  state = {\r\n    openFolders: {},\r\n    selection: [], // should be the file ids, not keys. If folder => then all children files\r\n    activeAction: null,\r\n    actionTargets: [],\r\n\r\n    nameFilter: \"\",\r\n    searchResultsShown: SEARCH_RESULTS_PER_PAGE,\r\n\r\n    previewFile: null,\r\n\r\n    addFolder: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.renderStyle === \"table\" && this.props.nestChildren) {\r\n      console.warn(\r\n        \"Invalid settings: Cannot nest table children in file browser\"\r\n      );\r\n    }\r\n\r\n    window.addEventListener(\"click\", this.handleGlobalClick);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // console.log(\"RKFB CDU\");\r\n    this.onSelectionChange();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // console.log(\"RKFB CWU\");\r\n    window.removeEventListener(\"click\", this.handleGlobalClick);\r\n  }\r\n\r\n  getFile = (key) => this.props.files.find((f) => f.key === key);\r\n\r\n  // Define if we should show shared column in Folder, File renderers\r\n  isShouldShowShared = () => {\r\n    // console.log(\"Input files\", this.props.files);\r\n    const filesWithSharedPresent = this.props.files.filter((fileObj) =>\r\n      includes(Object.keys(fileObj), \"sharer\")\r\n    );\r\n    const isShould = filesWithSharedPresent.length > 0;\r\n    // console.log(\r\n    //   isShould ? \"We should see shared\" : \"We should NOT see shared\",\r\n    //   filesWithSharedPresent\r\n    // );\r\n    return isShould;\r\n  };\r\n\r\n  // Define if we should whos is the consumer of shared files with\r\n  isShouldShowSharedWithWhom = () => {\r\n    // console.log(\"Input files\", this.props.files);\r\n    const filesWithSharedPresent = this.props.files.filter((fileObj) =>\r\n      includes(Object.keys(fileObj), \"shared_with\")\r\n    );\r\n    const isShould = filesWithSharedPresent.length > 0;\r\n    // console.log(\r\n    //   isShould ? \"We should see shared\" : \"We should NOT see shared\",\r\n    //   filesWithSharedPresent\r\n    // );\r\n    return isShould;\r\n  };\r\n\r\n  // item manipulation\r\n  createFiles = (files, prefix) => {\r\n    this.setState(\r\n      (prevState) => {\r\n        const stateChanges = { selection: [] };\r\n        if (prefix) {\r\n          stateChanges.openFolders = {\r\n            ...prevState.openFolders,\r\n            [prefix]: true,\r\n          };\r\n        }\r\n        return stateChanges;\r\n      },\r\n      () => {\r\n        this.props.onCreateFiles(files, prefix);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Disabled for Amera at the moment\r\n  createFolder = (key) => {\r\n    this.setState(\r\n      {\r\n        activeAction: null,\r\n        actionTargets: [],\r\n        selection: [key],\r\n      },\r\n      () => {\r\n        this.props.onCreateFolder(key);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Should work\r\n  moveFile = (oldKey, newKey) => {\r\n    this.setState(\r\n      {\r\n        activeAction: null,\r\n        actionTargets: [],\r\n        selection: [newKey],\r\n      },\r\n      () => {\r\n        this.props.onMoveFile(oldKey, newKey);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Should work\r\n  moveFolder = (oldKey, newKey) => {\r\n    this.setState(\r\n      (prevState) => {\r\n        const stateChanges = {\r\n          activeAction: null,\r\n          actionTargets: [],\r\n          selection: [newKey],\r\n        };\r\n        if (oldKey in prevState.openFolders) {\r\n          stateChanges.openFolders = {\r\n            ...prevState.openFolders,\r\n            [newKey]: true,\r\n          };\r\n        }\r\n        return stateChanges;\r\n      },\r\n      () => {\r\n        this.props.onMoveFolder(oldKey, newKey);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Should work\r\n  renameFile = (oldKey, newKey) => {\r\n    this.setState(\r\n      {\r\n        activeAction: null,\r\n        actionTargets: [],\r\n        selection: [newKey],\r\n      },\r\n      () => {\r\n        this.props.onRenameFile(oldKey, newKey);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Should work\r\n  renameFolder = (oldKey, newKey) => {\r\n    this.setState(\r\n      (prevState) => {\r\n        const stateChanges = {\r\n          activeAction: null,\r\n          actionTargets: [],\r\n        };\r\n        if (prevState.selection[0].substr(0, oldKey.length) === oldKey) {\r\n          stateChanges.selection = [\r\n            prevState.selection[0].replace(oldKey, newKey),\r\n          ];\r\n        }\r\n        if (oldKey in prevState.openFolders) {\r\n          stateChanges.openFolders = {\r\n            ...prevState.openFolders,\r\n            [newKey]: true,\r\n          };\r\n        }\r\n        return stateChanges;\r\n      },\r\n      () => {\r\n        this.props.onRenameFolder(oldKey, newKey);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Should work\r\n  deleteFile = (keys) => {\r\n    this.setState(\r\n      {\r\n        activeAction: null,\r\n        actionTargets: [],\r\n        selection: [],\r\n      },\r\n      () => {\r\n        this.props.onDeleteFile(keys);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Not using now\r\n  deleteFolder = (key) => {\r\n    this.setState(\r\n      (prevState) => {\r\n        const stateChanges = {\r\n          activeAction: null,\r\n          actionTargets: [],\r\n          selection: [],\r\n        };\r\n        if (key in prevState.openFolders) {\r\n          stateChanges.openFolders = { ...prevState.openFolders };\r\n          delete stateChanges.openFolders[key];\r\n        }\r\n        return stateChanges;\r\n      },\r\n      () => {\r\n        this.props.onDeleteFolder(key);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Not using now\r\n  downloadFile = (keys) => {\r\n    this.setState(\r\n      {\r\n        activeAction: null,\r\n        actionTargets: [],\r\n      },\r\n      () => {\r\n        this.props.onDownloadFile(keys);\r\n      }\r\n    );\r\n  };\r\n\r\n  // browser manipulation\r\n  beginAction = (action, ids) => {\r\n    this.setState({\r\n      activeAction: action,\r\n      actionTargets: ids || [],\r\n    });\r\n  };\r\n\r\n  endAction = () => {\r\n    if (\r\n      this.state.selection &&\r\n      this.state.selection.length > 0 &&\r\n      this.state.selection.filter((selection) =>\r\n        selection.match(regexForNewFolderOrFileSelection)\r\n      ).length > 0\r\n    ) {\r\n      this.setState({ selection: [] });\r\n    }\r\n    this.beginAction(null, null);\r\n  };\r\n\r\n  onSelectionChange = () => {\r\n    this.props.onSelectionChange(this.state.selection);\r\n  };\r\n\r\n  select = (key, selectedType, ctrlKey, shiftKey) => {\r\n    const { actionTargets } = this.state;\r\n    const shouldClearState =\r\n      actionTargets.length && !actionTargets.includes(key);\r\n    const selected = this.getFile(key);\r\n\r\n    let newSelection = [key];\r\n    if (ctrlKey || shiftKey) {\r\n      const indexOfKey = this.state.selection.indexOf(key);\r\n      if (indexOfKey !== -1) {\r\n        newSelection = [\r\n          ...this.state.selection.slice(0, indexOfKey),\r\n          ...this.state.selection.slice(indexOfKey + 1),\r\n        ];\r\n      } else {\r\n        newSelection = [...this.state.selection, key];\r\n      }\r\n    }\r\n\r\n    this.setState(\r\n      (prevState) => ({\r\n        selection: newSelection,\r\n        actionTargets: shouldClearState ? [] : actionTargets,\r\n        activeAction: shouldClearState ? null : prevState.activeAction,\r\n      }),\r\n      () => {\r\n        this.props.onSelect(newSelection);\r\n\r\n        if (selectedType === \"file\")\r\n          this.props.onSelectFile(\r\n            this.state.selection.map((key) => this.getFile(key))\r\n          );\r\n        if (selectedType === \"folder\") this.props.onSelectFolder(selected);\r\n      }\r\n    );\r\n  };\r\n\r\n  preview = (file) => {\r\n    if (this.state.previewFile && this.state.previewFile.key !== file.key)\r\n      this.closeDetail();\r\n\r\n    this.setState(\r\n      {\r\n        previewFile: file,\r\n      },\r\n      () => {\r\n        this.props.onPreviewOpen(file);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Should be ok\r\n  closeDetail = () => {\r\n    this.setState(\r\n      {\r\n        previewFile: null,\r\n      },\r\n      () => {\r\n        this.props.onPreviewClose(this.state.previewFile);\r\n      }\r\n    );\r\n  };\r\n\r\n  // Not used\r\n  handleShowMoreClick = (event) => {\r\n    event.preventDefault();\r\n    this.setState((prevState) => ({\r\n      searchResultsShown:\r\n        prevState.searchResultsShown + SEARCH_RESULTS_PER_PAGE,\r\n    }));\r\n  };\r\n\r\n  // Changes here\r\n  toggleFolder = (folderKey) => {\r\n    const isOpen = folderKey in this.state.openFolders;\r\n    this.setState(\r\n      (prevState) => {\r\n        const stateChanges = {\r\n          openFolders: { ...prevState.openFolders },\r\n        };\r\n        if (isOpen) {\r\n          delete stateChanges.openFolders[folderKey];\r\n        } else {\r\n          stateChanges.openFolders[folderKey] = true;\r\n        }\r\n        return stateChanges;\r\n      },\r\n      () => {\r\n        const callback = isOpen ? \"onFolderClose\" : \"onFolderOpen\";\r\n        this.props[callback](this.getFile(folderKey));\r\n      }\r\n    );\r\n  };\r\n\r\n  openFolder = (folderKey) => {\r\n    this.setState(\r\n      (prevState) => ({\r\n        openFolders: {\r\n          ...prevState.openFolders,\r\n          [folderKey]: true,\r\n        },\r\n      }),\r\n      () => {\r\n        this.props.onFolderOpen(this.getFile(folderKey));\r\n      }\r\n    );\r\n  };\r\n\r\n  // event handlers\r\n  handleGlobalClick = (event) => {\r\n    const inBrowser = !!(\r\n      this.browserRef && this.browserRef.contains(event.target)\r\n    );\r\n    // TODO: updated old-to-new ref styles, but this ref was never set\r\n    const inPreview = !!(\r\n      this.previewRef && this.previewRef.contains(event.target)\r\n    );\r\n\r\n    if (!inBrowser && !inPreview) {\r\n      this.setState({\r\n        selection: [],\r\n        actionTargets: [],\r\n        activeAction: null,\r\n      });\r\n    }\r\n  };\r\n  handleActionBarRenameClick = (event) => {\r\n    if (event) {\r\n      event.preventDefault();\r\n    }\r\n    console.log(\r\n      \"Action bar rename triggered, the selection is\",\r\n      this.state.selection\r\n    );\r\n    // event.preventDefault();\r\n    // Should check this\r\n    this.beginAction(\"rename\", this.state.selection);\r\n  };\r\n  // Not using this\r\n  handleActionBarDeleteClick = (event) => {\r\n    event.preventDefault();\r\n    this.beginAction(\"delete\", this.state.selection);\r\n  };\r\n  // Not using this\r\n  handleActionBarAddFolderClick = () => {\r\n    // event.preventDefault();\r\n    if (this.state.activeAction === \"createFolder\") {\r\n      return;\r\n    }\r\n    this.setState((prevState) => {\r\n      let addKey = \"\";\r\n      if (prevState.selection && prevState.selection.length > 0) {\r\n        addKey += prevState.selection;\r\n        if (addKey.substr(addKey.length - 1, addKey.length) !== \"/\") {\r\n          addKey += \"/\";\r\n        }\r\n      }\r\n\r\n      if (addKey !== \"__new__/\" && !addKey.endsWith(\"/__new__/\"))\r\n        addKey += \"__new__/\";\r\n      const stateChanges = {\r\n        actionTargets: [addKey],\r\n        activeAction: \"createFolder\",\r\n        selection: [addKey],\r\n      };\r\n      if (prevState.selection && prevState.selection.length > 0) {\r\n        stateChanges.openFolders = {\r\n          ...prevState.openFolders,\r\n          [this.state.selection]: true,\r\n        };\r\n      }\r\n      return stateChanges;\r\n    });\r\n  };\r\n  // Not using this\r\n  handleActionBarDownloadClick = (event) => {\r\n    event.preventDefault();\r\n    this.downloadFile(this.state.selection);\r\n  };\r\n  // ok\r\n  updateFilter = (newValue) => {\r\n    this.setState({\r\n      nameFilter: newValue,\r\n      searchResultsShown: SEARCH_RESULTS_PER_PAGE,\r\n    });\r\n  };\r\n\r\n  getBrowserProps() {\r\n    return {\r\n      // browser config\r\n      nestChildren: this.props.nestChildren,\r\n      fileRenderer: this.props.fileRenderer,\r\n      fileRendererProps: this.props.fileRendererProps,\r\n      folderRenderer: this.props.folderRenderer,\r\n      folderRendererProps: this.props.folderRendererProps,\r\n      confirmDeletionRenderer: this.props.confirmDeletionRenderer,\r\n      confirmMultipleDeletionRenderer: this.props\r\n        .confirmMultipleDeletionRenderer,\r\n      icons: this.props.icons,\r\n\r\n      // browser state\r\n      openFolders: this.state.openFolders,\r\n      nameFilter: this.state.nameFilter,\r\n      selection: this.state.selection,\r\n      activeAction: this.state.activeAction,\r\n      actionTargets: this.state.actionTargets,\r\n\r\n      // browser manipulation\r\n      select: this.select,\r\n      openFolder: this.openFolder,\r\n      toggleFolder: this.toggleFolder,\r\n      beginAction: this.beginAction,\r\n      endAction: this.endAction,\r\n      preview: this.preview,\r\n\r\n      // item manipulation\r\n      createFiles: this.props.onCreateFiles ? this.createFiles : undefined,\r\n      createFolder: this.props.onCreateFolder ? this.createFolder : undefined,\r\n      renameFile: this.props.onRenameFile ? this.renameFile : undefined,\r\n      renameFolder: this.props.onRenameFolder ? this.renameFolder : undefined,\r\n      moveFile: this.props.onMoveFile ? this.moveFile : undefined,\r\n      moveFolder: this.props.onMoveFolder ? this.moveFolder : undefined,\r\n      deleteFile: this.props.onDeleteFile ? this.deleteFile : undefined,\r\n      deleteFolder: this.props.onDeleteFolder ? this.deleteFolder : undefined,\r\n\r\n      getItemProps: getItemProps,\r\n    };\r\n  }\r\n\r\n  renderActionBar(selectedItems) {\r\n    const {\r\n      icons,\r\n      canFilter,\r\n      filterRendererProps,\r\n      filterRenderer: FilterRenderer,\r\n      actionRenderer: ActionRenderer,\r\n      onCreateFolder,\r\n      onRenameFile,\r\n      onRenameFolder,\r\n      onDeleteFile,\r\n      onDeleteFolder,\r\n      onDownloadFile,\r\n    } = this.props;\r\n    const browserProps = this.getBrowserProps();\r\n    const selectionIsFolder =\r\n      selectedItems.length === 1 && !selectedItems[0].size;\r\n    let filter;\r\n    if (canFilter) {\r\n      filter = (\r\n        <FilterRenderer\r\n          value={this.state.nameFilter}\r\n          icons={this.props.icons}\r\n          updateFilter={this.updateFilter}\r\n          {...filterRendererProps}\r\n        />\r\n      );\r\n    }\r\n\r\n    const actions = (\r\n      <ActionRenderer\r\n        browserProps={browserProps}\r\n        selectedItems={selectedItems}\r\n        isFolder={selectionIsFolder}\r\n        icons={icons}\r\n        nameFilter={this.state.nameFilter}\r\n        canCreateFolder={typeof onCreateFolder === \"function\"}\r\n        onCreateFolder={this.handleActionBarAddFolderClick}\r\n        canRenameFile={typeof onRenameFile === \"function\"}\r\n        onRenameFile={this.handleActionBarRenameClick}\r\n        canRenameFolder={typeof onRenameFolder === \"function\"}\r\n        onRenameFolder={this.handleActionBarRenameClick}\r\n        canDeleteFile={typeof onDeleteFile === \"function\"}\r\n        onDeleteFile={this.handleActionBarDeleteClick}\r\n        canDeleteFolder={typeof onDeleteFolder === \"function\"}\r\n        onDeleteFolder={this.handleActionBarDeleteClick}\r\n        canDownloadFile={typeof onDownloadFile === \"function\"}\r\n        onDownloadFile={this.handleActionBarDownloadClick}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <div className=\"action-bar\" ref={this.actionBarRef}>\r\n        {filter}\r\n        {actions}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderFiles(files, depth) {\r\n    const {\r\n      fileRenderer: FileRenderer,\r\n      fileRendererProps,\r\n      folderRenderer: FolderRenderer,\r\n      folderRendererProps,\r\n    } = this.props;\r\n    const browserProps = this.getBrowserProps();\r\n    let renderedFiles = [];\r\n\r\n    files.map((file) => {\r\n      const thisItemProps = {\r\n        ...browserProps.getItemProps(file, browserProps),\r\n        depth: this.state.nameFilter ? 0 : depth,\r\n      };\r\n\r\n      if (!isFolder(file)) {\r\n        renderedFiles.push(\r\n          <FileRenderer\r\n            {...file}\r\n            {...thisItemProps}\r\n            browserProps={browserProps}\r\n            isShouldShowShared={this.isShouldShowShared()}\r\n            isShouldShowSharedWithWhom={this.isShouldShowSharedWithWhom()}\r\n            {...fileRendererProps}\r\n          />\r\n        );\r\n      } else {\r\n        if (this.props.showFoldersOnFilter || !this.state.nameFilter) {\r\n          renderedFiles.push(\r\n            <FolderRenderer\r\n              {...file}\r\n              {...thisItemProps}\r\n              isShouldShowShared={this.isShouldShowShared()}\r\n              isShouldShowSharedWithWhom={this.isShouldShowSharedWithWhom()}\r\n              browserProps={browserProps}\r\n              {...folderRendererProps}\r\n            />\r\n          );\r\n        }\r\n        if (\r\n          this.state.nameFilter ||\r\n          (thisItemProps.isOpen && !browserProps.nestChildren)\r\n        ) {\r\n          renderedFiles = renderedFiles.concat(\r\n            this.renderFiles(file.children, depth + 1)\r\n          );\r\n        }\r\n      }\r\n    });\r\n    return renderedFiles;\r\n  }\r\n  // Not using this\r\n  handleMultipleDeleteSubmit = () => {\r\n    console.log(this);\r\n    this.deleteFolder(\r\n      this.state.selection.filter(\r\n        (selection) => selection[selection.length - 1] === \"/\"\r\n      )\r\n    );\r\n    this.deleteFile(\r\n      this.state.selection.filter(\r\n        (selection) => selection[selection.length - 1] !== \"/\"\r\n      )\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { selection } = this.state;\r\n\r\n    const browserProps = this.getBrowserProps();\r\n    const headerProps = {\r\n      browserProps,\r\n      fileKey: \"\",\r\n      fileCount: this.props.files.length,\r\n      isShouldShowShared: this.isShouldShowShared(),\r\n      isShouldShowSharedWithWhom: this.isShouldShowSharedWithWhom(),\r\n    };\r\n    let renderedFiles;\r\n\r\n    let files = this.props.files.concat([]);\r\n    if (this.state.activeAction === \"createFolder\") {\r\n      files.push({\r\n        key: this.state.actionTargets[0],\r\n        size: 0,\r\n        draft: true,\r\n      });\r\n    }\r\n    if (this.state.nameFilter) {\r\n      const filteredFiles = [];\r\n      const terms = this.state.nameFilter.toLowerCase().split(\" \");\r\n      files.map((file) => {\r\n        let skip = false;\r\n        terms.map((term) => {\r\n          if (file.key.toLowerCase().trim().indexOf(term) === -1) {\r\n            skip = true;\r\n          }\r\n        });\r\n        if (skip) {\r\n          return;\r\n        }\r\n        filteredFiles.push(file);\r\n      });\r\n      files = filteredFiles;\r\n    }\r\n    if (typeof this.props.group === \"function\") {\r\n      files = this.props.group(files, \"\");\r\n    } else {\r\n      const newFiles = [];\r\n      files.map((file) => {\r\n        if (!isFolder(file)) {\r\n          newFiles.push(file);\r\n        }\r\n      });\r\n      files = newFiles;\r\n    }\r\n    const selectedItems = [];\r\n    const findSelected = (item) => {\r\n      if (selection.includes(item.key)) {\r\n        selectedItems.push(item);\r\n      }\r\n      if (item.children) {\r\n        item.children.map(findSelected);\r\n      }\r\n    };\r\n    files.map(findSelected);\r\n    if (typeof this.props.sort === \"function\") {\r\n      files = this.props.sort(files);\r\n    }\r\n\r\n    let header;\r\n    /** @type any */\r\n    let contents = this.renderFiles(files, 0);\r\n    switch (this.props.renderStyle) {\r\n      case \"table\":\r\n        if (!contents.length) {\r\n          if (this.state.nameFilter) {\r\n            contents = (\r\n              <tr>\r\n                <td colSpan={100}>\r\n                  No files matching \"{this.state.nameFilter}\".\r\n                </td>\r\n              </tr>\r\n            );\r\n          } else {\r\n            contents = (\r\n              <tr>\r\n                <td colSpan={100}>{this.props.noFilesMessage}</td>\r\n              </tr>\r\n            );\r\n          }\r\n        } else {\r\n          if (this.state.nameFilter) {\r\n            const numFiles = contents.length;\r\n            contents = contents.slice(0, this.state.searchResultsShown);\r\n            if (numFiles > contents.length) {\r\n              contents.push(\r\n                <tr key=\"show-more\">\r\n                  <td colSpan={100}>\r\n                    <a onClick={this.handleShowMoreClick} href=\"#\">\r\n                      Show more results\r\n                    </a>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            }\r\n          }\r\n        }\r\n\r\n        if (this.props.headerRenderer) {\r\n          header = (\r\n            <thead>\r\n              <this.props.headerRenderer\r\n                {...headerProps}\r\n                {...this.props.headerRendererProps}\r\n              />\r\n            </thead>\r\n          );\r\n        }\r\n\r\n        renderedFiles = (\r\n          <table cellSpacing=\"0\" cellPadding=\"0\">\r\n            {header}\r\n            <tbody>{contents}</tbody>\r\n          </table>\r\n        );\r\n        break;\r\n\r\n      case \"list\":\r\n        if (!contents.length) {\r\n          if (this.state.nameFilter) {\r\n            contents = (\r\n              <p className=\"empty\">\r\n                No files matching \"{this.state.nameFilter}\"\r\n              </p>\r\n            );\r\n          } else {\r\n            contents = <p className=\"empty\">No files.</p>;\r\n          }\r\n        } else {\r\n          let more;\r\n          if (this.state.nameFilter) {\r\n            const numFiles = contents.length;\r\n            contents = contents.slice(0, this.state.searchResultsShown);\r\n            if (numFiles > contents.length) {\r\n              more = (\r\n                <a onClick={this.handleShowMoreClick} href=\"#\">\r\n                  Show more results\r\n                </a>\r\n              );\r\n            }\r\n          }\r\n          contents = (\r\n            <div>\r\n              <ul>{contents}</ul>\r\n              {more}\r\n            </div>\r\n          );\r\n        }\r\n\r\n        if (this.props.headerRenderer) {\r\n          header = (\r\n            <this.props.headerRenderer\r\n              {...headerProps}\r\n              {...this.props.headerRendererProps}\r\n            />\r\n          );\r\n        }\r\n\r\n        renderedFiles = (\r\n          <div>\r\n            {header}\r\n            {contents}\r\n          </div>\r\n        );\r\n        break;\r\n    }\r\n\r\n    const ConfirmMultipleDeletionRenderer = this.props\r\n      .confirmMultipleDeletionRenderer;\r\n\r\n    return (\r\n      <div className=\"rendered-react-keyed-file-browser\">\r\n        {this.props.actions}\r\n        <div\r\n          className=\"rendered-file-browser\"\r\n          ref={(el) => {\r\n            this.browserRef = el;\r\n          }}\r\n        >\r\n          {this.props.showActionBar && this.renderActionBar(selectedItems)}\r\n          {this.state.activeAction === \"delete\" &&\r\n            this.state.selection.length > 1 && (\r\n              <ConfirmMultipleDeletionRenderer\r\n                handleDeleteSubmit={this.handleMultipleDeleteSubmit}\r\n              />\r\n            )}\r\n          <div className=\"files\">{renderedFiles}</div>\r\n        </div>\r\n        {this.state.previewFile !== null && (\r\n          <this.props.detailRenderer\r\n            file={this.state.previewFile}\r\n            close={this.closeDetail}\r\n            {...this.props.detailRendererProps}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n@DragDropContext(HTML5Backend)\r\nclass FileBrowser extends RawFileBrowser {}\r\n\r\nexport default FileBrowser;\r\nexport { RawFileBrowser };\r\n","import React from \"react\";\r\n\r\n// See https://allthingssmitty.com/2016/09/12/checking-if-font-awesome-loaded/\r\nconst IsFontAwesomeLoaded = (version) => {\r\n  const prefix = version === 4 ? \"fa\" : \"fas\";\r\n  const fontNames =\r\n    version === 4\r\n      ? [\"FontAwesome\", '\"FontAwesome\"']\r\n      : ['\"Font Awesome 5 Free\"', '\"Font Awesome 5 Pro\"'];\r\n  let FontAwesomeLoaded = false;\r\n  const span = document.createElement(\"span\");\r\n\r\n  span.className = prefix;\r\n  span.style.display = \"none\";\r\n  document.body.insertBefore(span, document.body.firstChild);\r\n\r\n  const css = (element, property) =>\r\n    window.getComputedStyle(element, null).getPropertyValue(property);\r\n\r\n  if (!fontNames.includes(css(span, \"font-family\"))) {\r\n    console.warn(\r\n      `Font Awesome ${version} was not detected but Font Awesome ${version} icons have been requested for \\`react-object-list\\``\r\n    );\r\n  } else {\r\n    FontAwesomeLoaded = true;\r\n  }\r\n  document.body.removeChild(span);\r\n  return FontAwesomeLoaded;\r\n};\r\n\r\nconst FontAwesomeIcons = (majorVersion = 4) => {\r\n  switch (majorVersion) {\r\n    case 4:\r\n      IsFontAwesomeLoaded(4);\r\n      return {\r\n        File: <i className=\"fa fa-file\" aria-hidden=\"true\" />,\r\n        Image: <i className=\"fa fa-file-image\" aria-hidden=\"true\" />,\r\n        Video: <i className=\"fa fa-file-video\" aria-hidden=\"true\" />,\r\n        Audio: <i className=\"fa fa-file-audio\" aria-hidden=\"true\" />,\r\n        Archive: <i className=\"fa fa-file-archive\" aria-hidden=\"true\" />,\r\n        Word: <i className=\"fa fa-file-word\" aria-hidden=\"true\" />,\r\n        Excel: <i className=\"fa fa-file-excel\" aria-hidden=\"true\" />,\r\n        PowerPoint: <i className=\"fa fa-file-powerpoint\" aria-hidden=\"true\" />,\r\n        Text: <i className=\"fa fa-file-text\" aria-hidden=\"true\" />,\r\n        PDF: <i className=\"fa fa-file-pdf\" aria-hidden=\"true\" />,\r\n        Rename: <i className=\"fa fa-i-cursor\" aria-hidden=\"true\" />,\r\n        Folder: <i className=\"fa fa-folder-o\" aria-hidden=\"true\" />,\r\n        FolderFilled: <i className=\"fa fa-folder\" aria-hidden=\"true\" />,\r\n        FolderOpen: <i className=\"fa fa-folder-open-o\" aria-hidden=\"true\" />,\r\n        FolderOpenFilled: (\r\n          <i className=\"fa fa-folder-open\" aria-hidden=\"true\" />\r\n        ),\r\n        Delete: <i className=\"fa fa-trash-o\" aria-hidden=\"true\" />,\r\n        Loading: (\r\n          <i className=\"fa fa-circle-o-notch fa-spin\" aria-hidden=\"true\" />\r\n        ),\r\n        Download: <i className=\"fa fa-download\" aria-hidden=\"true\" />,\r\n      };\r\n    case 5:\r\n      IsFontAwesomeLoaded(5);\r\n      return {\r\n        File: <i className=\"fas fa-file\"></i>,\r\n        Image: <i className=\"fas fa-file-image\"></i>,\r\n        Video: <i className=\"fas fa-file-video\"></i>,\r\n        Audio: <i className=\"fas fa-file-audio\"></i>,\r\n        Archive: <i className=\"fas fa-file-archive\"></i>,\r\n        Word: <i className=\"fas fa-file-word\"></i>,\r\n        Excel: <i className=\"fas fa-file-excel\"></i>,\r\n        PowerPoint: <i className=\"fas fa-file-powerpoint\"></i>,\r\n        Text: <i className=\"fas fa-file-alt\"></i>,\r\n        PDF: <i className=\"fas fa-file-pdf\"></i>,\r\n        Rename: <i className=\"fas fa-remove-format\"></i>,\r\n        Folder: <i className=\"fas fa-folder\"></i>,\r\n        FolderFilled: <i className=\"fas fa-folder\"></i>,\r\n        FolderPlus: <i className=\"fas fa-folder-plus\"></i>,\r\n        FolderOpen: <i className=\"fas fa-folder-open\"></i>,\r\n        Delete: <i className=\"fas fa-trash\"></i>,\r\n        Loading: (\r\n          <i className=\"fas fa-circle-notch fa-spin\" aria-hidden=\"true\" />\r\n        ),\r\n        Download: <i className=\"fas fa-file-download\"></i>,\r\n      };\r\n    default:\r\n      console.warn(\r\n        `Could not find config for version ${majorVersion}`,\r\n        \"Accepted versions are: 4, 5\",\r\n        \"Please make an issue in `react-object-list` to fix this.\"\r\n      );\r\n  }\r\n};\r\n\r\nexport default FontAwesomeIcons;\r\n","// @ts-nocheck\r\nimport FileBrowser, { RawFileBrowser } from './browser'\r\nimport BaseFile, { BaseFileConnectors } from './base-file'\r\nimport BaseFolder, { BaseFolderConnectors } from './base-folder'\r\n\r\nimport * as Headers from './headers'\r\nimport * as FileRenderers from './files'\r\nimport * as FolderRenderers from './folders'\r\n\r\nimport * as Details from './details'\r\nimport * as Filters from './filters'\r\nimport * as Groupers from './groupers'\r\nimport * as Sorters from './sorters'\r\nimport * as Icons from './icons'\r\nimport * as Utils from './utils'\r\n\r\nexport default FileBrowser\r\nexport {\r\n  RawFileBrowser, // Use this one if you want to wrap with dragdrop context yourself.\r\n\r\n  BaseFile,\r\n  BaseFileConnectors,\r\n  BaseFolder,\r\n  BaseFolderConnectors,\r\n\r\n  Headers,\r\n  FileRenderers,\r\n  FolderRenderers,\r\n\r\n  Details,\r\n  Filters,\r\n  Groupers,\r\n  Sorters,\r\n  Icons,\r\n  Utils,\r\n}\r\n"],"sourceRoot":""}